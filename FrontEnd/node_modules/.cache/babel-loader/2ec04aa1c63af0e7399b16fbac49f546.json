{"ast":null,"code":"var _jsxFileName = \"D:\\\\5th Sem\\\\Web Technologies\\\\WT PROJECT\\\\Social\\\\Social-Networking-Mern\\\\FrontEnd\\\\src\\\\component\\\\Join.jsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport Post from \"./Post\";\nimport Posts from \"./Posts\";\nimport auth from \"./../auth/auth-help\";\nimport jwt1 from \"jwt-decode\"; // import dependency\n\nimport { getSender } from \"../config/chatLogic\";\nimport Avatar from \"@mui/material/Avatar\";\nimport { useRef } from \"react\";\nimport { useEffect } from \"react\";\nimport Tooltip from \"@mui/material/Tooltip\";\nimport \"./chat.css\";\nimport { io } from \"socket.io-client\";\nimport IconButton from \"@mui/material/IconButton\";\nimport Button from \"@mui/material/Button\";\nimport Menu from \"@mui/material/Menu\";\nimport GridLoader from \"react-spinners/GridLoader\";\nimport SendIcon from \"@mui/icons-material/Send\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport Fade from \"@mui/material/Fade\";\nimport Badge from \"@mui/material/Badge\";\nimport MailIcon from \"@mui/icons-material/Mail\";\nimport { Typography } from \"@mui/material\";\nimport { searchuser } from \"../api/api-post\";\nimport { getSenderFull } from \"../config/chatLogic\";\nimport FindPeople from \"./FindPeople\";\nimport Box from \"@mui/material/Box\";\nimport { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { getChat } from \"../api/api-post\";\nimport { setMessage } from \"../api/api-post\";\nimport { fetchChats } from \"../api/api-post\";\nimport BounceLoader from \"react-spinners/BounceLoader\";\nimport MoonLoader from \"react-spinners/MoonLoader\";\nimport TextField from \"@mui/material/TextField\";\nimport CircularProgress from \"@mui/material/CircularProgress\";\nimport { getMessage } from \"../api/api-post\";\nimport Stack from \"@mui/material/Stack\";\nimport DarkModeIcon from \"@mui/icons-material/DarkMode\";\nimport Autocomplete from \"@mui/material/Autocomplete\";\nimport { toast } from \"react-toastify\";\nimport { isLastMessage, isSameSender, isSameSenderMargin, isSameUser } from \"../config/chatLogic\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar socket;\nvar selectedChatCompare;\n\nconst Join = () => {\n  _s();\n\n  const [search, setSearch] = useState(\"\");\n  const [searchResult, setSearchResult] = useState([]);\n  const [open, setOpen] = useState(false);\n  const [value1, setValue1] = useState({});\n  const [chats, setChats] = useState([]);\n  const [notification, setNotification] = useState([]);\n  const [chat, setChat] = useState([]);\n  const [selectChat, setSelectChat] = useState(false);\n  const [socketcon, Setsocketc] = useState(false);\n  const [loading1, Setloading1] = useState(false);\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState(\"\");\n  const [lastM, setLastM] = useState([]);\n  const [typing, setTyping] = useState(false);\n  const [istyping, setIsTyping] = useState(false);\n  const jwt = auth.isAuthenticated();\n  const user1 = jwt1(jwt.token);\n  const loading = searchResult.length != 0 && open;\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [fetchAgain, setFetchAgain] = useState(false);\n  const [mode, setMode] = useState(\"light\");\n  const [l, sl] = useState(\"\");\n  const open1 = Boolean(anchorEl);\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = chat => {\n    setAnchorEl(null);\n  };\n\n  const handleClose1 = notiy => {\n    setAnchorEl(null);\n    setSelectChat(true);\n    setChat(notiy.chat);\n    selectedChatCompare = chat;\n    fetchMessages();\n    setNotification(notification.filter(e => e !== notiy)); // Get(chat)\n  };\n\n  function padTo2Digits(num) {\n    return String(num).padStart(2, \"0\");\n  }\n\n  const fetchMessages = async () => {\n    if (!selectChat) return;\n\n    try {\n      await getMessage({\n        userId: user1.id\n      }, {\n        t: jwt.token\n      }, chat._id).then(data => {\n        setMessages(data);\n        socket.emit(\"join chat\", chat._id);\n        console.log(data);\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const Get = async v => {\n    if (!v) return;\n    Setloading1(true);\n    setValue1(v);\n    await getChat({\n      userId: user1.id\n    }, {\n      t: jwt.token\n    }, v._id).then(data => {\n      if (data) {\n        setSelectChat(true);\n        setChat(data);\n        selectedChatCompare = chat;\n        fetchMessages();\n        Setloading1(false);\n      }\n    });\n  };\n\n  const PostMessage = async () => {\n    if (!newMessage) return;\n    setNewMessage(\"\");\n    socket.emit(\"stop typing\", chat._id);\n    await setMessage({\n      id: user1.id,\n      chatId: chat._id,\n      content: newMessage\n    }, {\n      t: jwt.token\n    }).then(data => {\n      socket.emit(\"new message\", data);\n      setMessages([...messages, data]);\n      setFetchAgain(!fetchAgain);\n    });\n  };\n\n  useEffect(() => {\n    searchuser({\n      userId: user1.id\n    }, {\n      t: jwt.token\n    }, {\n      search: search\n    }).then(data => {\n      if (search != \"\") setSearchResult(data);else setSearchResult([]);\n    });\n  }, [search]);\n  useEffect(() => {\n    fetchMessages();\n    selectedChatCompare = chat;\n  }, [chat]);\n  useEffect(() => {\n    console.log(user1);\n    socket = io(\"http://localhost:4000/\");\n    socket.emit(\"setup\", user1);\n    socket.on(\"connected\", () => Setsocketc(true));\n    socket.on(\"typing\", () => setIsTyping(true));\n    socket.on(\"stop typing\", () => setIsTyping(false));\n  }, []);\n  useEffect(() => {\n    fetchChats({\n      userId: user1.id\n    }, {\n      t: jwt.token\n    }).then(data => {\n      if (data) setChats(data);\n      console.log(data);\n    });\n  }, [fetchAgain]);\n  useEffect(() => {\n    socket.on(\"message recieved\", newMessageRecieved => {\n      if (!selectedChatCompare || // if chat is not selected or doesn't match current chat\n      selectedChatCompare._id !== newMessageRecieved.chat._id) {\n        if (!notification.includes(newMessageRecieved)) {\n          setNotification([newMessageRecieved, ...notification]);\n          setFetchAgain(!fetchAgain);\n        }\n      } else {\n        setMessages([...messages, newMessageRecieved]);\n        setFetchAgain(!fetchAgain);\n      }\n    });\n  });\n  const [ChatColor, setChatColor] = useState(\"white\");\n  const [Color3, setColor3] = useState(\"white\");\n  const [TextColor, setTextC] = useState(\"black\");\n  const [Color4, setColor4] = useState(\"#dee2e6\");\n  const [STextColor, setStext] = useState(\"gray\");\n  const [backim, setbsckim] = useState(\"123.png\");\n  const [fchatc, setf] = useState(\"#b8ebb4\");\n  const [schatc, setsc] = useState(\"white\");\n  const [ima, setim] = useState(\"123.png\");\n\n  const change = mode => {\n    if (mode == \"dark\") {\n      setChatColor(\"#444F5A\");\n      setColor3(\"#222831\");\n      setTextC(\"white\");\n      setColor4(\"#222831\");\n      setStext(\"#D8D3CD\");\n      setbsckim(\"jbVvEcAi.jpg\");\n      setf(\"#274528\");\n      setsc(\"#393E46\");\n      setim(\"jbVvEcAi.jpg\");\n    } else {\n      setChatColor(\"white\");\n      setColor3(\"white\");\n      setim(\"123.png\");\n      setTextC(\"black\");\n      setColor4(\"#dee2e6\");\n      setStext(\"gray\");\n      setbsckim(\"123.png\");\n      setf(\"#b8ebb4\");\n      setsc(\"white\");\n    }\n  };\n\n  const typingHandler = e => {\n    setNewMessage(e.target.value);\n    if (!socketcon) return;\n\n    if (!typing) {\n      setTyping(true);\n      socket.emit(\"typing\", chat._id);\n    }\n\n    let lastTypingTime = new Date().getTime();\n    var timerLength = 3000;\n    setTimeout(() => {\n      var timeNow = new Date().getTime();\n      var timeDiff = timeNow - lastTypingTime;\n\n      if (timeDiff >= timerLength && typing) {\n        socket.emit(\"stop typing\", chat._id);\n        setTyping(false);\n      }\n    }, timerLength);\n  };\n\n  const messagesEndRef = useRef();\n\n  const scrollToBottom = () => {\n    messagesEndRef.current && messagesEndRef.current.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  };\n\n  const handleKeyDown = event => {\n    if (event.key === 'Enter') {\n      PostMessage();\n    }\n  };\n\n  useEffect(scrollToBottom, [messages]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"vh-100 d-flex grey2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-4 p-0 h-100 \",\n          style: {\n            backgroundColor: `${Color4}`\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"justify-content-between border p-3  d-flex align-items-start grey\",\n            style: {\n              backgroundColor: `${Color3}`,\n              color: `${TextColor}`\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"font-weight-bold ms-3 mt-1\",\n              children: \"Chats\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rounded input-group m-0 ps-3 pe-5\",\n              children: /*#__PURE__*/_jsxDEV(Stack, {\n                spacing: 1,\n                sx: {\n                  width: 100\n                },\n                children: /*#__PURE__*/_jsxDEV(Autocomplete, {\n                  className: \"rounded\",\n                  size: \"small\",\n                  id: \"asynchronous-demo\",\n                  sx: {\n                    width: 250\n                  },\n                  options: searchResult,\n                  loading: loading,\n                  open: open,\n                  onOpen: () => {\n                    setOpen(true);\n                  },\n                  onClose: () => {\n                    setOpen(false); //setSearchResult([])\n                  },\n                  onChange: (event, value) => Get(value) // prints the selected value\n                  ,\n                  autoHighlight: true,\n                  getOptionLabel: option => option.name,\n                  renderOption: (props, option) => /*#__PURE__*/_jsxDEV(Box, {\n                    component: \"li\",\n                    sx: {\n                      \"& > img\": {\n                        mr: 2,\n                        flexShrink: 0\n                      }\n                    },\n                    ...props,\n                    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                      className: \"rounded-circle me-3\",\n                      loading: \"lazy\",\n                      width: \"30\",\n                      height: \"30\",\n                      src: option.image //srcSet={`https://flagcdn.com/w40/${option.code.toLowerCase()}.png 2x`}\n                      ,\n                      alt: \"\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 323,\n                      columnNumber: 25\n                    }, this), option.name]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 318,\n                    columnNumber: 23\n                  }, this),\n                  renderInput: params => /*#__PURE__*/_jsxDEV(TextField, {\n                    className: \"rounded bg-white\",\n                    sx: {\n                      p: \"0px\"\n                    },\n                    size: \"small\",\n                    onChange: e => setSearch(e.target.value),\n                    ...params,\n                    placeholder: \"Search To Chat\",\n                    InputProps: { ...params.InputProps,\n                      endAdornment: /*#__PURE__*/_jsxDEV(React.Fragment, {\n                        children: [loading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n                          color: \"inherit\",\n                          size: 20\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 348,\n                          columnNumber: 33\n                        }, this) : null, params.InputProps.endAdornment]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 346,\n                        columnNumber: 29\n                      }, this)\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 336,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 299,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ml-2\",\n              children: [/*#__PURE__*/_jsxDEV(Stack, {\n                spacing: 4,\n                direction: \"row\",\n                sx: {\n                  color: \"action.active\"\n                },\n                children: /*#__PURE__*/_jsxDEV(Badge, {\n                  id: \"fade-button\",\n                  \"aria-controls\": open1 ? \"fade-menu\" : undefined,\n                  \"aria-haspopup\": \"true\",\n                  \"aria-expanded\": open1 ? \"true\" : undefined,\n                  onClick: handleClick,\n                  color: \"secondary\",\n                  badgeContent: notification.length,\n                  children: /*#__PURE__*/_jsxDEV(MailIcon, {\n                    color: \"primary\",\n                    fontSize: \"large\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 374,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 365,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 360,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Menu, {\n                id: \"fade-menu\",\n                MenuListProps: {\n                  \"aria-labelledby\": \"fade-button\"\n                },\n                anchorEl: anchorEl,\n                open: open1,\n                onClose: handleClose,\n                TransitionComponent: Fade,\n                children: notification.length == 0 ? /*#__PURE__*/_jsxDEV(MenuItem, {\n                  onClick: handleClose,\n                  children: \"No Message\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 388,\n                  columnNumber: 21\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: notification.map(notify => {\n                    return /*#__PURE__*/_jsxDEV(MenuItem, {\n                      onClick: () => handleClose1(notify),\n                      children: [\"\\\"New Message from : \\\"\", getSender(user1, notify.chat.users)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 393,\n                      columnNumber: 27\n                    }, this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 390,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 377,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"justify-content-center scroll overflow-auto px-3 mt-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \" mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa fa-moon-o btn btn-dark mb-1 \",\n                onClick: () => change(\"dark\"),\n                children: \"dark\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 406,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"fa fa-moon-o btn btn-light mb-1\",\n                onClick: () => change(\"light\"),\n                children: \"light\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 412,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 13\n            }, this), chats.map(chat => {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                children: chat.latestMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex text-white align-items-center justify-content-between px-3 py-1 hovering shadow-sm  mb-1 \\r border-radius\",\n                  onClick: () => {\n                    Setloading1(true);\n                    setTimeout(function () {\n                      Setloading1(false);\n                      setSelectChat(true);\n                      setValue1(getSenderFull(user1, chat.users));\n                      setChat(chat);\n                    }, 700);\n                  },\n                  style: {\n                    backgroundColor: `${ChatColor}`\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"d-flex align-items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                      src: getSenderFull(user1, chat.users).image,\n                      alt: \"\",\n                      className: \"rounded-circle me-3\",\n                      width: \"50px\",\n                      height: \"50px\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 440,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"mt-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                        style: {\n                          color: `${TextColor}`\n                        },\n                        className: \"m-0 text-lg-left font-weight-bold\",\n                        children: getSender(user1, chat.users)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 448,\n                        columnNumber: 25\n                      }, this), chat.latestMessage ? /*#__PURE__*/_jsxDEV(\"p\", {\n                        style: {\n                          color: `${STextColor}`\n                        },\n                        children: chat.latestMessage.content\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 455,\n                        columnNumber: 27\n                      }, this) : null]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 447,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 439,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"\",\n                    children: chat.latestMessage ? /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"m-0 mb-2\",\n                      style: {\n                        color: `${STextColor}`\n                      },\n                      children: new Date(chat.latestMessage.createdAt).toLocaleTimeString(\"en-US\", {\n                        // en-US can be set to 'default' to use user's browser settings\n                        hour: \"2-digit\",\n                        minute: \"2-digit\"\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 463,\n                      columnNumber: 25\n                    }, this) : null\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 461,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 423,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 421,\n                columnNumber: 19\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this), selectChat ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-8 h-100 p-0 \",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              backgroundColor: `${Color3}`\n            },\n            className: \"d-flex ps-3 pe-4 py-3 border justify-content-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: value1.image,\n                alt: \"\",\n                className: \"rounded-circle me-2\",\n                width: \"40px\",\n                height: \"40px\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 492,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"\",\n                children: /*#__PURE__*/_jsxDEV(\"h6\", {\n                  style: {\n                    color: `${TextColor}`\n                  },\n                  className: \"font-weight-bold mt-2\",\n                  children: value1.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 500,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 499,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n              onClick: () => setSelectChat(false),\n              className: \"fa fa-window-close fs-4 text-secondary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 510,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 485,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              backgroundImage: `url(../images/${backim})`\n            },\n            className: \"scroll2 overflow-auto mb-0 px-5 py-3\",\n            children: [messages && messages.map((m, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\"\n              },\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"d-inline-block rounded\",\n                style: {\n                  color: `${TextColor}`,\n                  backgroundColor: `${m.sender._id === user1.id ? fchatc : schatc}`,\n                  marginLeft: isSameSenderMargin(messages, m, i, user1.id),\n                  marginTop: isSameUser(messages, m, i, user1.id) ? 3 : 10,\n                  borderRadius: \"20px\",\n                  marginBottom: \"0px\",\n                  padding: \"5px 15px\",\n                  maxWidth: \"75%\"\n                },\n                children: m.content\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 524,\n                columnNumber: 23\n              }, this)\n            }, m._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 523,\n              columnNumber: 21\n            }, this)), istyping ? /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: 15,\n                marginLeft: 0\n              },\n              className: \"d-flex justify-content-end mt-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"circle me-1 circle1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 555,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"circle me-1 circle2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 556,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"circle me-1 circle3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 557,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"circle me-1 circle4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 558,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 551,\n              columnNumber: 19\n            }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n              ref: messagesEndRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 561,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 515,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex align-items-center py-2 justify-content-center px-4 \",\n            style: {\n              backgroundColor: `${ChatColor}`\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa-regular fa-face-laugh-beam fs-4 me-3 text-secondary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 569,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa-solid fa-paperclip fs-4 me-3 text-secondary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 570,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              style: {\n                backgroundColor: `${Color4}`,\n                color: `${TextColor}`\n              },\n              value: newMessage,\n              onChange: typingHandler,\n              type: \"text\",\n              className: \"form-control grey p-2\",\n              placeholder: \"type a message\",\n              \"aria-label\": \"First name\",\n              onKeyDown: handleKeyDown\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 571,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n              onClick: PostMessage,\n              \"aria-hidden\": \"true\",\n              className: \"fa fa-paper-plane bg-primary green px-4 py-2 ms-3 rounded\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 584,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 563,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            backgroundImage: `url(../images/${ima})`\n          },\n          className: \"scroll2 col-8 h-100 p-0 bg-black\",\n          children: !loading1 ? /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"f align-center\",\n            style: {\n              color: TextColor\n            },\n            children: [user1.name, \", Select any Chat\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 599,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(GridLoader, {\n            className: \"f align-center\",\n            color: \"#3667d6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 603,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 592,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 610,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 284,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Join, \"HX7dnTsaKR/6GwySiAOx1L0cjq8=\");\n\n_c = Join;\nexport default Join;\n\nvar _c;\n\n$RefreshReg$(_c, \"Join\");","map":{"version":3,"names":["React","Post","Posts","auth","jwt1","getSender","Avatar","useRef","useEffect","Tooltip","io","IconButton","Button","Menu","GridLoader","SendIcon","MenuItem","Fade","Badge","MailIcon","Typography","searchuser","getSenderFull","FindPeople","Box","useState","useNavigate","getChat","setMessage","fetchChats","BounceLoader","MoonLoader","TextField","CircularProgress","getMessage","Stack","DarkModeIcon","Autocomplete","toast","isLastMessage","isSameSender","isSameSenderMargin","isSameUser","socket","selectedChatCompare","Join","search","setSearch","searchResult","setSearchResult","open","setOpen","value1","setValue1","chats","setChats","notification","setNotification","chat","setChat","selectChat","setSelectChat","socketcon","Setsocketc","loading1","Setloading1","messages","setMessages","newMessage","setNewMessage","lastM","setLastM","typing","setTyping","istyping","setIsTyping","jwt","isAuthenticated","user1","token","loading","length","anchorEl","setAnchorEl","fetchAgain","setFetchAgain","mode","setMode","l","sl","open1","Boolean","handleClick","event","currentTarget","handleClose","handleClose1","notiy","fetchMessages","filter","e","padTo2Digits","num","String","padStart","userId","id","t","_id","then","data","emit","console","log","error","Get","v","PostMessage","chatId","content","on","newMessageRecieved","includes","ChatColor","setChatColor","Color3","setColor3","TextColor","setTextC","Color4","setColor4","STextColor","setStext","backim","setbsckim","fchatc","setf","schatc","setsc","ima","setim","change","typingHandler","target","value","lastTypingTime","Date","getTime","timerLength","setTimeout","timeNow","timeDiff","messagesEndRef","scrollToBottom","current","scrollIntoView","behavior","handleKeyDown","key","backgroundColor","color","width","option","name","props","mr","flexShrink","image","params","p","InputProps","endAdornment","undefined","map","notify","users","latestMessage","createdAt","toLocaleTimeString","hour","minute","backgroundImage","m","i","display","sender","marginLeft","marginTop","borderRadius","marginBottom","padding","maxWidth"],"sources":["D:/5th Sem/Web Technologies/WT PROJECT/Social/Social-Networking-Mern/FrontEnd/src/component/Join.jsx"],"sourcesContent":["import React from \"react\";\r\nimport Post from \"./Post\";\r\nimport Posts from \"./Posts\";\r\nimport auth from \"./../auth/auth-help\";\r\nimport jwt1 from \"jwt-decode\"; // import dependency\r\nimport { getSender } from \"../config/chatLogic\";\r\nimport Avatar from \"@mui/material/Avatar\";\r\nimport { useRef } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport Tooltip from \"@mui/material/Tooltip\";\r\nimport \"./chat.css\";\r\nimport { io } from \"socket.io-client\";\r\nimport IconButton from \"@mui/material/IconButton\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Menu from \"@mui/material/Menu\";\r\nimport GridLoader from \"react-spinners/GridLoader\";\r\nimport SendIcon from \"@mui/icons-material/Send\";\r\nimport MenuItem from \"@mui/material/MenuItem\";\r\nimport Fade from \"@mui/material/Fade\";\r\nimport Badge from \"@mui/material/Badge\";\r\nimport MailIcon from \"@mui/icons-material/Mail\";\r\nimport { Typography } from \"@mui/material\";\r\nimport { searchuser } from \"../api/api-post\";\r\nimport { getSenderFull } from \"../config/chatLogic\";\r\nimport FindPeople from \"./FindPeople\";\r\nimport Box from \"@mui/material/Box\";\r\nimport { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { getChat } from \"../api/api-post\";\r\nimport { setMessage } from \"../api/api-post\";\r\nimport { fetchChats } from \"../api/api-post\";\r\nimport BounceLoader from \"react-spinners/BounceLoader\";\r\nimport MoonLoader from \"react-spinners/MoonLoader\";\r\nimport TextField from \"@mui/material/TextField\";\r\nimport CircularProgress from \"@mui/material/CircularProgress\";\r\nimport { getMessage } from \"../api/api-post\";\r\nimport Stack from \"@mui/material/Stack\";\r\nimport DarkModeIcon from \"@mui/icons-material/DarkMode\";\r\nimport Autocomplete from \"@mui/material/Autocomplete\";\r\nimport { toast } from \"react-toastify\";\r\nimport {\r\n  isLastMessage,\r\n  isSameSender,\r\n  isSameSenderMargin,\r\n  isSameUser,\r\n} from \"../config/chatLogic\";\r\n\r\nvar socket;\r\nvar selectedChatCompare;\r\nconst Join = () => {\r\n  const [search, setSearch] = useState(\"\");\r\n  const [searchResult, setSearchResult] = useState([]);\r\n  const [open, setOpen] = useState(false);\r\n  const [value1, setValue1] = useState({});\r\n  const [chats, setChats] = useState([]);\r\n  const [notification, setNotification] = useState([]);\r\n  const [chat, setChat] = useState([]);\r\n  const [selectChat, setSelectChat] = useState(false);\r\n  const [socketcon, Setsocketc] = useState(false);\r\n  const [loading1, Setloading1] = useState(false);\r\n  const [messages, setMessages] = useState([]);\r\n  const [newMessage, setNewMessage] = useState(\"\");\r\n  const [lastM, setLastM] = useState([]);\r\n  const [typing, setTyping] = useState(false);\r\n  const [istyping, setIsTyping] = useState(false);\r\n  const jwt = auth.isAuthenticated();\r\n  const user1 = jwt1(jwt.token);\r\n  const loading = searchResult.length != 0 && open;\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const [fetchAgain, setFetchAgain] = useState(false);\r\n  const [mode, setMode] = useState(\"light\");\r\n\r\n  const [l, sl] = useState(\"\");\r\n  const open1 = Boolean(anchorEl);\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n  const handleClose = (chat) => {\r\n    setAnchorEl(null);\r\n  };\r\n  const handleClose1 = (notiy) => {\r\n    setAnchorEl(null);\r\n    setSelectChat(true);\r\n    setChat(notiy.chat);\r\n    selectedChatCompare = chat;\r\n    fetchMessages();\r\n    setNotification(notification.filter((e) => e !== notiy));\r\n    // Get(chat)\r\n  };\r\n  function padTo2Digits(num) {\r\n    return String(num).padStart(2, \"0\");\r\n  }\r\n\r\n  const fetchMessages = async () => {\r\n    if (!selectChat) return;\r\n\r\n    try {\r\n      await getMessage(\r\n        {\r\n          userId: user1.id,\r\n        },\r\n        {\r\n          t: jwt.token,\r\n        },\r\n        chat._id\r\n      ).then((data) => {\r\n        setMessages(data);\r\n        socket.emit(\"join chat\", chat._id);\r\n        console.log(data);\r\n      });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const Get = async (v) => {\r\n    if (!v) return;\r\n    Setloading1(true);\r\n    setValue1(v);\r\n    await getChat(\r\n      {\r\n        userId: user1.id,\r\n      },\r\n      {\r\n        t: jwt.token,\r\n      },\r\n      v._id\r\n    ).then((data) => {\r\n      if (data) {\r\n        setSelectChat(true);\r\n        setChat(data);\r\n        selectedChatCompare = chat;\r\n        fetchMessages();\r\n        Setloading1(false);\r\n      }\r\n    });\r\n  };\r\n  const PostMessage = async () => {\r\n    if (!newMessage) return;\r\n    setNewMessage(\"\");\r\n    socket.emit(\"stop typing\", chat._id);\r\n\r\n    await setMessage(\r\n      { id: user1.id, chatId: chat._id, content: newMessage },\r\n      {\r\n        t: jwt.token,\r\n      }\r\n    ).then((data) => {\r\n      socket.emit(\"new message\", data);\r\n      setMessages([...messages, data]);\r\n      setFetchAgain(!fetchAgain);\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    searchuser(\r\n      {\r\n        userId: user1.id,\r\n      },\r\n      {\r\n        t: jwt.token,\r\n      },\r\n      {\r\n        search: search,\r\n      }\r\n    ).then((data) => {\r\n      if (search != \"\") setSearchResult(data);\r\n      else setSearchResult([]);\r\n    });\r\n  }, [search]);\r\n\r\n  useEffect(() => {\r\n    fetchMessages();\r\n    selectedChatCompare = chat;\r\n  }, [chat]);\r\n\r\n  useEffect(() => {\r\n    console.log(user1);\r\n    socket = io(\"http://localhost:4000/\");\r\n    socket.emit(\"setup\", user1);\r\n    socket.on(\"connected\", () => Setsocketc(true));\r\n    socket.on(\"typing\", () => setIsTyping(true));\r\n    socket.on(\"stop typing\", () => setIsTyping(false));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchChats(\r\n      {\r\n        userId: user1.id,\r\n      },\r\n      {\r\n        t: jwt.token,\r\n      }\r\n    ).then((data) => {\r\n      if (data) setChats(data);\r\n      console.log(data);\r\n    });\r\n  }, [fetchAgain]);\r\n  useEffect(() => {\r\n    socket.on(\"message recieved\", (newMessageRecieved) => {\r\n      if (\r\n        !selectedChatCompare || // if chat is not selected or doesn't match current chat\r\n        selectedChatCompare._id !== newMessageRecieved.chat._id\r\n      ) {\r\n        if (!notification.includes(newMessageRecieved)) {\r\n          setNotification([newMessageRecieved, ...notification]);\r\n          setFetchAgain(!fetchAgain);\r\n        }\r\n      } else {\r\n        setMessages([...messages, newMessageRecieved]);\r\n        setFetchAgain(!fetchAgain);\r\n      }\r\n    });\r\n  });\r\n\r\n  const [ChatColor, setChatColor] = useState(\"white\");\r\n  const [Color3, setColor3] = useState(\"white\");\r\n  const [TextColor, setTextC] = useState(\"black\");\r\n  const [Color4, setColor4] = useState(\"#dee2e6\");\r\n  const [STextColor, setStext] = useState(\"gray\");\r\n  const [backim, setbsckim] = useState(\"123.png\");\r\n  const [fchatc, setf] = useState(\"#b8ebb4\");\r\n  const [schatc, setsc] = useState(\"white\");\r\n  const [ima, setim] = useState(\"123.png\");\r\n\r\n  const change = (mode) => {\r\n    if (mode == \"dark\") {\r\n      setChatColor(\"#444F5A\");\r\n      setColor3(\"#222831\");\r\n      setTextC(\"white\");\r\n      setColor4(\"#222831\");\r\n      setStext(\"#D8D3CD\");\r\n      setbsckim(\"jbVvEcAi.jpg\");\r\n      setf(\"#274528\");\r\n      setsc(\"#393E46\");\r\n      setim(\"jbVvEcAi.jpg\");\r\n    } else {\r\n      setChatColor(\"white\");\r\n      setColor3(\"white\");\r\n\r\n      setim(\"123.png\");\r\n      setTextC(\"black\");\r\n      setColor4(\"#dee2e6\");\r\n      setStext(\"gray\");\r\n      setbsckim(\"123.png\");\r\n      setf(\"#b8ebb4\");\r\n      setsc(\"white\");\r\n    }\r\n  };\r\n\r\n  const typingHandler = (e) => {\r\n    setNewMessage(e.target.value);\r\n\r\n    if (!socketcon) return;\r\n\r\n    if (!typing) {\r\n      setTyping(true);\r\n      socket.emit(\"typing\", chat._id);\r\n    }\r\n    let lastTypingTime = new Date().getTime();\r\n    var timerLength = 3000;\r\n    setTimeout(() => {\r\n      var timeNow = new Date().getTime();\r\n      var timeDiff = timeNow - lastTypingTime;\r\n      if (timeDiff >= timerLength && typing) {\r\n        socket.emit(\"stop typing\", chat._id);\r\n        setTyping(false);\r\n      }\r\n    }, timerLength);\r\n  };\r\n  const messagesEndRef = useRef();\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current &&\r\n      messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  const handleKeyDown = (event) => {\r\n    if (event.key === 'Enter') {\r\n      PostMessage();\r\n    }\r\n  }\r\n  useEffect(scrollToBottom, [messages]);\r\n  return (\r\n    <div>\r\n      <div>\r\n        <section className=\"vh-100 d-flex grey2\">\r\n          <div\r\n            className=\"col-4 p-0 h-100 \"\r\n            style={{ backgroundColor: `${Color4}` }}\r\n          >\r\n            <div\r\n              className=\"justify-content-between border p-3  d-flex align-items-start grey\"\r\n              style={{ backgroundColor: `${Color3}`, color: `${TextColor}` }}\r\n            >\r\n              <h5 className=\"font-weight-bold ms-3 mt-1\">Chats</h5>\r\n\r\n              <div className=\"rounded input-group m-0 ps-3 pe-5\">\r\n                <Stack spacing={1} sx={{ width: 100 }}>\r\n                  <Autocomplete\r\n                    className=\"rounded\"\r\n                    size=\"small\"\r\n                    id=\"asynchronous-demo\"\r\n                    sx={{ width: 250 }}\r\n                    options={searchResult}\r\n                    loading={loading}\r\n                    open={open}\r\n                    onOpen={() => {\r\n                      setOpen(true);\r\n                    }}\r\n                    onClose={() => {\r\n                      setOpen(false);\r\n                      //setSearchResult([])\r\n                    }}\r\n                    onChange={(event, value) => Get(value)} // prints the selected value\r\n                    autoHighlight\r\n                    getOptionLabel={(option) => option.name}\r\n                    renderOption={(props, option) => (\r\n                      <Box\r\n                        component=\"li\"\r\n                        sx={{ \"& > img\": { mr: 2, flexShrink: 0 } }}\r\n                        {...props}\r\n                      >\r\n                        <img\r\n                          className=\"rounded-circle me-3\"\r\n                          loading=\"lazy\"\r\n                          width=\"30\"\r\n                          height=\"30\"\r\n                          src={option.image}\r\n                          //srcSet={`https://flagcdn.com/w40/${option.code.toLowerCase()}.png 2x`}\r\n                          alt=\"\"\r\n                        />\r\n                        {option.name}\r\n                      </Box>\r\n                    )}\r\n                    renderInput={(params) => (\r\n                      <TextField\r\n                        className={\"rounded bg-white\"}\r\n                        sx={{ p: \"0px\" }}\r\n                        size=\"small\"\r\n                        onChange={(e) => setSearch(e.target.value)}\r\n                        {...params}\r\n                        placeholder=\"Search To Chat\"\r\n                        InputProps={{\r\n                          ...params.InputProps,\r\n                          endAdornment: (\r\n                            <React.Fragment>\r\n                              {loading ? (\r\n                                <CircularProgress color=\"inherit\" size={20} />\r\n                              ) : null}\r\n                              {params.InputProps.endAdornment}\r\n                            </React.Fragment>\r\n                          ),\r\n                        }}\r\n                      />\r\n                    )}\r\n                  />\r\n                </Stack>\r\n              </div>\r\n              <div className={\"ml-2\"}>\r\n                <Stack\r\n                  spacing={4}\r\n                  direction=\"row\"\r\n                  sx={{ color: \"action.active\" }}\r\n                >\r\n                  <Badge\r\n                    id=\"fade-button\"\r\n                    aria-controls={open1 ? \"fade-menu\" : undefined}\r\n                    aria-haspopup=\"true\"\r\n                    aria-expanded={open1 ? \"true\" : undefined}\r\n                    onClick={handleClick}\r\n                    color=\"secondary\"\r\n                    badgeContent={notification.length}\r\n                  >\r\n                    <MailIcon color=\"primary\" fontSize=\"large\" />\r\n                  </Badge>\r\n                </Stack>\r\n                <Menu\r\n                  id=\"fade-menu\"\r\n                  MenuListProps={{\r\n                    \"aria-labelledby\": \"fade-button\",\r\n                  }}\r\n                  anchorEl={anchorEl}\r\n                  open={open1}\r\n                  onClose={handleClose}\r\n                  TransitionComponent={Fade}\r\n                >\r\n                  {notification.length == 0 ? (\r\n                    <MenuItem onClick={handleClose}>No Message</MenuItem>\r\n                  ) : (\r\n                    <div>\r\n                      {notification.map((notify) => {\r\n                        return (\r\n                          <MenuItem onClick={() => handleClose1(notify)}>\r\n                            \"New Message from : \"\r\n                            {getSender(user1, notify.chat.users)}\r\n                          </MenuItem>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  )}\r\n                </Menu>\r\n              </div>\r\n            </div>\r\n            <div className=\"justify-content-center scroll overflow-auto px-3 mt-2\">\r\n            <div className=\" mb-2\">\r\n              <i\r\n                className={\"fa fa-moon-o btn btn-dark mb-1 \"}\r\n                onClick={() => change(\"dark\")}\r\n              >\r\n                dark\r\n              </i>\r\n              <button\r\n                className={\"fa fa-moon-o btn btn-light mb-1\"}\r\n                onClick={() => change(\"light\")}\r\n              >\r\n                light\r\n              </button>\r\n              </div>\r\n              {chats.map((chat) => {\r\n                return (\r\n                  <div>\r\n                  {chat.latestMessage &&\r\n                  <div\r\n                    className=\"d-flex text-white align-items-center justify-content-between px-3 py-1 hovering shadow-sm  mb-1 \r\n              border-radius\"\r\n                    onClick={() => {\r\n                      Setloading1(true);\r\n                      setTimeout(function () {\r\n                        Setloading1(false);\r\n                        setSelectChat(true);\r\n                        setValue1(getSenderFull(user1, chat.users));\r\n                        setChat(chat);\r\n                      }, 700);\r\n                    }}\r\n                    style={{\r\n                      backgroundColor: `${ChatColor}`,\r\n                    }}\r\n                  >\r\n                    <div className=\"d-flex align-items-center\">\r\n                      <img\r\n                        src={getSenderFull(user1, chat.users).image}\r\n                        alt=\"\"\r\n                        className=\"rounded-circle me-3\"\r\n                        width=\"50px\"\r\n                        height=\"50px\"\r\n                      />\r\n                      <div className=\"mt-3\">\r\n                        <h6\r\n                          style={{ color: `${TextColor}` }}\r\n                          className=\"m-0 text-lg-left font-weight-bold\"\r\n                        >\r\n                          {getSender(user1, chat.users)}\r\n                        </h6>\r\n                        {chat.latestMessage ? (\r\n                          <p style={{ color: `${STextColor}` }}>\r\n                            {chat.latestMessage.content}\r\n                          </p>\r\n                        ) : null}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"\">\r\n                      {chat.latestMessage ? (\r\n                        <p\r\n                          className=\"m-0 mb-2\"\r\n                          style={{ color: `${STextColor}` }}\r\n                        >\r\n                          {new Date(\r\n                            chat.latestMessage.createdAt\r\n                          ).toLocaleTimeString(\"en-US\", {\r\n                            // en-US can be set to 'default' to use user's browser settings\r\n                            hour: \"2-digit\",\r\n                            minute: \"2-digit\",\r\n                          })}\r\n                        </p>\r\n                      ) : null}\r\n                    </div>\r\n                  </div>}\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n          {selectChat ? (\r\n            <div className=\"col-8 h-100 p-0 \">\r\n              <div\r\n                style={{\r\n                  backgroundColor: `${Color3}`,\r\n                }}\r\n                className=\"d-flex ps-3 pe-4 py-3 border justify-content-between\"\r\n              >\r\n                <div className=\"d-flex\">\r\n                  <img\r\n                    src={value1.image}\r\n                    alt=\"\"\r\n                    className=\"rounded-circle me-2\"\r\n                    width=\"40px\"\r\n                    height=\"40px\"\r\n                  />\r\n                  <div className=\"\">\r\n                    <h6\r\n                      style={{\r\n                        color: `${TextColor}`,\r\n                      }}\r\n                      className=\"font-weight-bold mt-2\"\r\n                    >\r\n                      {value1.name}\r\n                    </h6>\r\n                  </div>\r\n                </div>\r\n                <i\r\n                  onClick={() => setSelectChat(false)}\r\n                  className=\"fa fa-window-close fs-4 text-secondary\"\r\n                />\r\n              </div>\r\n              <div\r\n                style={{\r\n                  backgroundImage: `url(../images/${backim})`,\r\n                }}\r\n                className=\"scroll2 overflow-auto mb-0 px-5 py-3\"\r\n              >\r\n                {messages &&\r\n                  messages.map((m, i) => (\r\n                    <div style={{ display: \"flex\" }} key={m._id}>\r\n                      <p\r\n                        className=\"d-inline-block rounded\"\r\n                        style={{\r\n                          color: `${TextColor}`,\r\n                          backgroundColor: `${\r\n                            m.sender._id === user1.id ? fchatc : schatc\r\n                          }`,\r\n                          marginLeft: isSameSenderMargin(\r\n                            messages,\r\n                            m,\r\n                            i,\r\n                            user1.id\r\n                          ),\r\n                          marginTop: isSameUser(messages, m, i, user1.id)\r\n                            ? 3\r\n                            : 10,\r\n                          borderRadius: \"20px\",\r\n                          marginBottom: \"0px\",\r\n                          padding: \"5px 15px\",\r\n                          maxWidth: \"75%\",\r\n                        }}\r\n                      >\r\n                        {m.content}\r\n                      </p>\r\n                    </div>\r\n                  ))}\r\n                {istyping ? (\r\n                  <div\r\n                    style={{ marginBottom: 15, marginLeft: 0 }}\r\n                    className=\"d-flex justify-content-end mt-4\"\r\n                  >\r\n                    <div className=\"circle me-1 circle1\" />\r\n                    <div className=\"circle me-1 circle2\" />\r\n                    <div className=\"circle me-1 circle3\" />\r\n                    <div className=\"circle me-1 circle4\" />\r\n                  </div>\r\n                ) : null}\r\n                <div ref={messagesEndRef} />\r\n              </div>\r\n              <div\r\n                className=\"d-flex align-items-center py-2 justify-content-center px-4 \"\r\n                style={{\r\n                  backgroundColor: `${ChatColor}`,\r\n                }}\r\n              >\r\n                <i className=\"fa-regular fa-face-laugh-beam fs-4 me-3 text-secondary\" />\r\n                <i className=\"fa-solid fa-paperclip fs-4 me-3 text-secondary\" />\r\n                <input\r\n                  style={{\r\n                    backgroundColor: `${Color4}`,\r\n                    color:`${TextColor}`\r\n                  }}\r\n                  value={newMessage}\r\n                  onChange={typingHandler}\r\n                  type=\"text\"\r\n                  className=\"form-control grey p-2\"\r\n                  placeholder=\"type a message\"\r\n                  aria-label=\"First name\"\r\n                  onKeyDown={handleKeyDown}\r\n                />\r\n                <i\r\n                  onClick={PostMessage}\r\n                  aria-hidden=\"true\"\r\n                  className=\"fa fa-paper-plane bg-primary green px-4 py-2 ms-3 rounded\"\r\n                />\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div\r\n              style={{\r\n                backgroundImage: `url(../images/${ima})`,\r\n              }}\r\n              className=\"scroll2 col-8 h-100 p-0 bg-black\"\r\n            >\r\n              {!loading1 ? (\r\n                <h1 className=\"f align-center\" style={{ color: TextColor }}>\r\n                  {user1.name}, Select any Chat\r\n                </h1>\r\n              ) : (\r\n                <GridLoader className=\"f align-center\" color=\"#3667d6\" />\r\n              )}\r\n            </div>\r\n          )}\r\n        </section>\r\n      </div>\r\n\r\n      <div></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Join;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}