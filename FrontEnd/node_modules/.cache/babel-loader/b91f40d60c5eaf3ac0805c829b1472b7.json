{"ast":null,"code":"import _objectSpread from\"D:/5th Sem/Web Technologies/WT PROJECT/Social/Social-Networking-Mern/FrontEnd/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"D:/5th Sem/Web Technologies/WT PROJECT/Social/Social-Networking-Mern/FrontEnd/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"D:/5th Sem/Web Technologies/WT PROJECT/Social/Social-Networking-Mern/FrontEnd/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/5th Sem/Web Technologies/WT PROJECT/Social/Social-Networking-Mern/FrontEnd/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/5th Sem/Web Technologies/WT PROJECT/Social/Social-Networking-Mern/FrontEnd/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import Post from\"./Post\";import Posts from\"./Posts\";import auth from\"./../auth/auth-help\";import jwt1 from\"jwt-decode\";// import dependency\nimport{getSender}from\"../config/chatLogic\";import Avatar from\"@mui/material/Avatar\";import{useRef}from\"react\";import{useEffect}from\"react\";import Tooltip from\"@mui/material/Tooltip\";import\"./chat.css\";import{io}from\"socket.io-client\";import IconButton from\"@mui/material/IconButton\";import Button from\"@mui/material/Button\";import Menu from\"@mui/material/Menu\";import GridLoader from\"react-spinners/GridLoader\";import SendIcon from\"@mui/icons-material/Send\";import MenuItem from\"@mui/material/MenuItem\";import Fade from\"@mui/material/Fade\";import Badge from\"@mui/material/Badge\";import MailIcon from\"@mui/icons-material/Mail\";import{Typography}from\"@mui/material\";import{searchuser}from\"../api/api-post\";import{getSenderFull}from\"../config/chatLogic\";import FindPeople from\"./FindPeople\";import Box from\"@mui/material/Box\";import{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{getChat}from\"../api/api-post\";import{setMessage}from\"../api/api-post\";import{fetchChats}from\"../api/api-post\";import BounceLoader from\"react-spinners/BounceLoader\";import MoonLoader from\"react-spinners/MoonLoader\";import TextField from\"@mui/material/TextField\";import CircularProgress from\"@mui/material/CircularProgress\";import{getMessage}from\"../api/api-post\";import Stack from\"@mui/material/Stack\";import DarkModeIcon from\"@mui/icons-material/DarkMode\";import Autocomplete from\"@mui/material/Autocomplete\";import{toast}from\"react-toastify\";import{isLastMessage,isSameSender,isSameSenderMargin,isSameUser}from\"../config/chatLogic\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var socket;var selectedChatCompare;var Join=function Join(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),search=_useState2[0],setSearch=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),searchResult=_useState4[0],setSearchResult=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),open=_useState6[0],setOpen=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),value1=_useState8[0],setValue1=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),chats=_useState10[0],setChats=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),notification=_useState12[0],setNotification=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),chat=_useState14[0],setChat=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),selectChat=_useState16[0],setSelectChat=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),socketcon=_useState18[0],Setsocketc=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),loading1=_useState20[0],Setloading1=_useState20[1];var _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),messages=_useState22[0],setMessages=_useState22[1];var _useState23=useState(\"\"),_useState24=_slicedToArray(_useState23,2),newMessage=_useState24[0],setNewMessage=_useState24[1];var _useState25=useState([]),_useState26=_slicedToArray(_useState25,2),lastM=_useState26[0],setLastM=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),typing=_useState28[0],setTyping=_useState28[1];var _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),istyping=_useState30[0],setIsTyping=_useState30[1];var jwt=auth.isAuthenticated();var user1=jwt1(jwt.token);var loading=searchResult.length!=0&&open;var _useState31=useState(null),_useState32=_slicedToArray(_useState31,2),anchorEl=_useState32[0],setAnchorEl=_useState32[1];var _useState33=useState(false),_useState34=_slicedToArray(_useState33,2),fetchAgain=_useState34[0],setFetchAgain=_useState34[1];var _useState35=useState(\"light\"),_useState36=_slicedToArray(_useState35,2),mode=_useState36[0],setMode=_useState36[1];var _useState37=useState(\"\"),_useState38=_slicedToArray(_useState37,2),l=_useState38[0],sl=_useState38[1];var open1=Boolean(anchorEl);var handleClick=function handleClick(event){setAnchorEl(event.currentTarget);};var handleClose=function handleClose(chat){setAnchorEl(null);};var handleClose1=function handleClose1(notiy){setAnchorEl(null);setSelectChat(true);setChat(notiy.chat);selectedChatCompare=chat;fetchMessages();setNotification(notification.filter(function(e){return e!==notiy;}));// Get(chat)\n};function padTo2Digits(num){return String(num).padStart(2,\"0\");}var fetchMessages=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(selectChat){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.prev=2;_context.next=5;return getMessage({userId:user1.id},{t:jwt.token},chat._id).then(function(data){setMessages(data);socket.emit(\"join chat\",chat._id);console.log(data);});case 5:_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](2);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[2,7]]);}));return function fetchMessages(){return _ref.apply(this,arguments);};}();var Get=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(v){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(v){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:Setloading1(true);setValue1(v);_context2.next=6;return getChat({userId:user1.id},{t:jwt.token},v._id).then(function(data){if(data){setSelectChat(true);setChat(data);selectedChatCompare=chat;fetchMessages();Setloading1(false);}});case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function Get(_x){return _ref2.apply(this,arguments);};}();var PostMessage=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(newMessage){_context3.next=2;break;}return _context3.abrupt(\"return\");case 2:setNewMessage(\"\");socket.emit(\"stop typing\",chat._id);_context3.next=6;return setMessage({id:user1.id,chatId:chat._id,content:newMessage},{t:jwt.token}).then(function(data){socket.emit(\"new message\",data);setMessages([].concat(_toConsumableArray(messages),[data]));setFetchAgain(!fetchAgain);});case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function PostMessage(){return _ref3.apply(this,arguments);};}();useEffect(function(){searchuser({userId:user1.id},{t:jwt.token},{search:search}).then(function(data){if(search!=\"\")setSearchResult(data);else setSearchResult([]);});},[search]);useEffect(function(){fetchMessages();selectedChatCompare=chat;},[chat]);useEffect(function(){console.log(user1);socket=io(\"http://localhost:4000/\");socket.emit(\"setup\",user1);socket.on(\"connected\",function(){return Setsocketc(true);});socket.on(\"typing\",function(){return setIsTyping(true);});socket.on(\"stop typing\",function(){return setIsTyping(false);});},[]);useEffect(function(){fetchChats({userId:user1.id},{t:jwt.token}).then(function(data){if(data)setChats(data);console.log(data);});},[fetchAgain]);useEffect(function(){socket.on(\"message recieved\",function(newMessageRecieved){if(!selectedChatCompare||// if chat is not selected or doesn't match current chat\nselectedChatCompare._id!==newMessageRecieved.chat._id){if(!notification.includes(newMessageRecieved)){setNotification([newMessageRecieved].concat(_toConsumableArray(notification)));setFetchAgain(!fetchAgain);}}else{setMessages([].concat(_toConsumableArray(messages),[newMessageRecieved]));setFetchAgain(!fetchAgain);}});});var _useState39=useState(\"white\"),_useState40=_slicedToArray(_useState39,2),ChatColor=_useState40[0],setChatColor=_useState40[1];var _useState41=useState(\"white\"),_useState42=_slicedToArray(_useState41,2),Color3=_useState42[0],setColor3=_useState42[1];var _useState43=useState(\"black\"),_useState44=_slicedToArray(_useState43,2),TextColor=_useState44[0],setTextC=_useState44[1];var _useState45=useState(\"#dee2e6\"),_useState46=_slicedToArray(_useState45,2),Color4=_useState46[0],setColor4=_useState46[1];var _useState47=useState(\"gray\"),_useState48=_slicedToArray(_useState47,2),STextColor=_useState48[0],setStext=_useState48[1];var _useState49=useState(\"123.png\"),_useState50=_slicedToArray(_useState49,2),backim=_useState50[0],setbsckim=_useState50[1];var _useState51=useState(\"#b8ebb4\"),_useState52=_slicedToArray(_useState51,2),fchatc=_useState52[0],setf=_useState52[1];var _useState53=useState(\"white\"),_useState54=_slicedToArray(_useState53,2),schatc=_useState54[0],setsc=_useState54[1];var _useState55=useState(\"123.png\"),_useState56=_slicedToArray(_useState55,2),ima=_useState56[0],setim=_useState56[1];var change=function change(mode){if(mode==\"dark\"){setChatColor(\"#444F5A\");setColor3(\"#222831\");setTextC(\"white\");setColor4(\"#222831\");setStext(\"#D8D3CD\");setbsckim(\"jbVvEcAi.jpg\");setf(\"#274528\");setsc(\"#393E46\");setim(\"jbVvEcAi.jpg\");}else{setChatColor(\"white\");setColor3(\"white\");setim(\"123.png\");setTextC(\"black\");setColor4(\"#dee2e6\");setStext(\"gray\");setbsckim(\"123.png\");setf(\"#b8ebb4\");setsc(\"white\");}};var typingHandler=function typingHandler(e){setNewMessage(e.target.value);if(!socketcon)return;if(!typing){setTyping(true);socket.emit(\"typing\",chat._id);}var lastTypingTime=new Date().getTime();var timerLength=3000;setTimeout(function(){var timeNow=new Date().getTime();var timeDiff=timeNow-lastTypingTime;if(timeDiff>=timerLength&&typing){socket.emit(\"stop typing\",chat._id);setTyping(false);}},timerLength);};var messagesEndRef=useRef();var scrollToBottom=function scrollToBottom(){messagesEndRef.current&&messagesEndRef.current.scrollIntoView({behavior:\"smooth\"});};var handleKeyDown=function handleKeyDown(event){if(event.key==='Enter'){PostMessage();}};useEffect(scrollToBottom,[messages]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"section\",{className:\"vh-100 d-flex grey2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-4 p-0 h-100 \",style:{backgroundColor:\"\".concat(Color4)},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"justify-content-between border p-3  d-flex align-items-start grey\",style:{backgroundColor:\"\".concat(Color3),color:\"\".concat(TextColor)},children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-weight-bold ms-3 mt-1\",children:\"Chats\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rounded input-group m-0 ps-3 pe-5\",children:/*#__PURE__*/_jsx(Stack,{spacing:1,sx:{width:100},children:/*#__PURE__*/_jsx(Autocomplete,{className:\"rounded\",size:\"small\",id:\"asynchronous-demo\",sx:{width:250},options:searchResult,loading:loading,open:open,onOpen:function onOpen(){setOpen(true);},onClose:function onClose(){setOpen(false);//setSearchResult([])\n},onChange:function onChange(event,value){return Get(value);}// prints the selected value\n,autoHighlight:true,getOptionLabel:function getOptionLabel(option){return option.name;},renderOption:function renderOption(props,option){return/*#__PURE__*/_jsxs(Box,_objectSpread(_objectSpread({component:\"li\",sx:{\"& > img\":{mr:2,flexShrink:0}}},props),{},{children:[/*#__PURE__*/_jsx(\"img\",{className:\"rounded-circle me-3\",loading:\"lazy\",width:\"30\",height:\"30\",src:option.image//srcSet={`https://flagcdn.com/w40/${option.code.toLowerCase()}.png 2x`}\n,alt:\"\"}),option.name]}));},renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({className:\"rounded bg-white\",sx:{p:\"0px\"},size:\"small\",onChange:function onChange(e){return setSearch(e.target.value);}},params),{},{placeholder:\"Search To Chat\",InputProps:_objectSpread(_objectSpread({},params.InputProps),{},{endAdornment:/*#__PURE__*/_jsxs(React.Fragment,{children:[loading?/*#__PURE__*/_jsx(CircularProgress,{color:\"inherit\",size:20}):null,params.InputProps.endAdornment]})})}));}})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-2\",children:[/*#__PURE__*/_jsx(Stack,{spacing:4,direction:\"row\",sx:{color:\"action.active\"},children:/*#__PURE__*/_jsx(Badge,{id:\"fade-button\",\"aria-controls\":open1?\"fade-menu\":undefined,\"aria-haspopup\":\"true\",\"aria-expanded\":open1?\"true\":undefined,onClick:handleClick,color:\"secondary\",badgeContent:notification.length,children:/*#__PURE__*/_jsx(MailIcon,{color:\"primary\",fontSize:\"large\"})})}),/*#__PURE__*/_jsx(Menu,{id:\"fade-menu\",MenuListProps:{\"aria-labelledby\":\"fade-button\"},anchorEl:anchorEl,open:open1,onClose:handleClose,TransitionComponent:Fade,children:notification.length==0?/*#__PURE__*/_jsx(MenuItem,{onClick:handleClose,children:\"No Message\"}):/*#__PURE__*/_jsx(\"div\",{children:notification.map(function(notify){return/*#__PURE__*/_jsxs(MenuItem,{onClick:function onClick(){return handleClose1(notify);},children:[\"\\\"New Message from : \\\"\",getSender(user1,notify.chat.users)]});})})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"justify-content-center scroll overflow-auto px-3 mt-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\" mb-2\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-moon-o btn btn-dark mb-1 \",onClick:function onClick(){return change(\"dark\");},children:\"dark\"}),/*#__PURE__*/_jsx(\"button\",{className:\"fa fa-moon-o btn btn-light mb-1\",onClick:function onClick(){return change(\"light\");},children:\"light\"})]}),chats.map(function(chat){return/*#__PURE__*/_jsx(\"div\",{children:chat.latestMessage&&/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex text-white align-items-center justify-content-between px-3 py-1 hovering shadow-sm  mb-1 \\r border-radius\",onClick:function onClick(){Setloading1(true);setTimeout(function(){Setloading1(false);setSelectChat(true);setValue1(getSenderFull(user1,chat.users));setChat(chat);},700);},style:{backgroundColor:\"\".concat(ChatColor)},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"img\",{src:getSenderFull(user1,chat.users).image,alt:\"\",className:\"rounded-circle me-3\",width:\"50px\",height:\"50px\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"h6\",{style:{color:\"\".concat(TextColor)},className:\"m-0 text-lg-left font-weight-bold\",children:getSender(user1,chat.users)}),chat.latestMessage?/*#__PURE__*/_jsx(\"p\",{style:{color:\"\".concat(STextColor)},children:chat.latestMessage.content}):null]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"\",children:chat.latestMessage?/*#__PURE__*/_jsx(\"p\",{className:\"m-0 mb-2\",style:{color:\"\".concat(STextColor)},children:new Date(chat.latestMessage.createdAt).toLocaleTimeString(\"en-US\",{// en-US can be set to 'default' to use user's browser settings\nhour:\"2-digit\",minute:\"2-digit\"})}):null})]})});})]})]}),selectChat?/*#__PURE__*/_jsxs(\"div\",{className:\"col-8 h-100 p-0 \",children:[/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:\"\".concat(Color3)},className:\"d-flex ps-3 pe-4 py-3 border justify-content-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(\"img\",{src:value1.image,alt:\"\",className:\"rounded-circle me-2\",width:\"40px\",height:\"40px\"}),/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsx(\"h6\",{style:{color:\"\".concat(TextColor)},className:\"font-weight-bold mt-2\",children:value1.name})})]}),/*#__PURE__*/_jsx(\"i\",{onClick:function onClick(){return setSelectChat(false);},className:\"fa fa-window-close fs-4 text-secondary\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{backgroundImage:\"url(../images/\".concat(backim,\")\")},className:\"scroll2 overflow-auto mb-0 px-5 py-3\",children:[messages&&messages.map(function(m,i){return/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\"},children:/*#__PURE__*/_jsx(\"p\",{className:\"d-inline-block rounded\",style:{color:\"\".concat(TextColor),backgroundColor:\"\".concat(m.sender._id===user1.id?fchatc:schatc),marginLeft:isSameSenderMargin(messages,m,i,user1.id),marginTop:isSameUser(messages,m,i,user1.id)?3:10,borderRadius:\"20px\",marginBottom:\"0px\",padding:\"5px 15px\",maxWidth:\"75%\"},children:m.content})},m._id);}),istyping?/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:15,marginLeft:0},className:\"d-flex justify-content-end mt-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"circle me-1 circle1\"}),/*#__PURE__*/_jsx(\"div\",{className:\"circle me-1 circle2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"circle me-1 circle3\"}),/*#__PURE__*/_jsx(\"div\",{className:\"circle me-1 circle4\"})]}):null,/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center py-2 justify-content-center px-4 \",style:{backgroundColor:\"\".concat(ChatColor)},children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-regular fa-face-laugh-beam fs-4 me-3 text-secondary\"}),/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-paperclip fs-4 me-3 text-secondary\"}),/*#__PURE__*/_jsx(\"input\",{style:{backgroundColor:\"\".concat(Color4),color:\"\".concat(TextColor)},value:newMessage,onChange:typingHandler,type:\"text\",className:\"form-control grey p-2\",placeholder:\"type a message\",\"aria-label\":\"First name\",onKeyDown:handleKeyDown}),/*#__PURE__*/_jsx(\"i\",{onClick:PostMessage,\"aria-hidden\":\"true\",className:\"fa fa-paper-plane bg-primary green px-4 py-2 ms-3 rounded\"})]})]}):/*#__PURE__*/_jsx(\"div\",{style:{backgroundImage:\"url(../images/\".concat(ima,\")\")},className:\"scroll2 col-8 h-100 p-0 bg-black\",children:!loading1?/*#__PURE__*/_jsxs(\"h1\",{className:\"f align-center\",style:{color:TextColor},children:[user1.name,\", Select any Chat\"]}):/*#__PURE__*/_jsx(GridLoader,{className:\"f align-center\",color:\"#3667d6\"})})]})}),/*#__PURE__*/_jsx(\"div\",{})]});};export default Join;","map":{"version":3,"names":["React","Post","Posts","auth","jwt1","getSender","Avatar","useRef","useEffect","Tooltip","io","IconButton","Button","Menu","GridLoader","SendIcon","MenuItem","Fade","Badge","MailIcon","Typography","searchuser","getSenderFull","FindPeople","Box","useState","useNavigate","getChat","setMessage","fetchChats","BounceLoader","MoonLoader","TextField","CircularProgress","getMessage","Stack","DarkModeIcon","Autocomplete","toast","isLastMessage","isSameSender","isSameSenderMargin","isSameUser","socket","selectedChatCompare","Join","search","setSearch","searchResult","setSearchResult","open","setOpen","value1","setValue1","chats","setChats","notification","setNotification","chat","setChat","selectChat","setSelectChat","socketcon","Setsocketc","loading1","Setloading1","messages","setMessages","newMessage","setNewMessage","lastM","setLastM","typing","setTyping","istyping","setIsTyping","jwt","isAuthenticated","user1","token","loading","length","anchorEl","setAnchorEl","fetchAgain","setFetchAgain","mode","setMode","l","sl","open1","Boolean","handleClick","event","currentTarget","handleClose","handleClose1","notiy","fetchMessages","filter","e","padTo2Digits","num","String","padStart","userId","id","t","_id","then","data","emit","console","log","Get","v","PostMessage","chatId","content","on","newMessageRecieved","includes","ChatColor","setChatColor","Color3","setColor3","TextColor","setTextC","Color4","setColor4","STextColor","setStext","backim","setbsckim","fchatc","setf","schatc","setsc","ima","setim","change","typingHandler","target","value","lastTypingTime","Date","getTime","timerLength","setTimeout","timeNow","timeDiff","messagesEndRef","scrollToBottom","current","scrollIntoView","behavior","handleKeyDown","key","backgroundColor","color","width","option","name","props","mr","flexShrink","image","params","p","InputProps","endAdornment","undefined","map","notify","users","latestMessage","createdAt","toLocaleTimeString","hour","minute","backgroundImage","m","i","display","sender","marginLeft","marginTop","borderRadius","marginBottom","padding","maxWidth"],"sources":["D:/5th Sem/Web Technologies/WT PROJECT/Social/Social-Networking-Mern/FrontEnd/src/component/Join.jsx"],"sourcesContent":["import React from \"react\";\r\nimport Post from \"./Post\";\r\nimport Posts from \"./Posts\";\r\nimport auth from \"./../auth/auth-help\";\r\nimport jwt1 from \"jwt-decode\"; // import dependency\r\nimport { getSender } from \"../config/chatLogic\";\r\nimport Avatar from \"@mui/material/Avatar\";\r\nimport { useRef } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport Tooltip from \"@mui/material/Tooltip\";\r\nimport \"./chat.css\";\r\nimport { io } from \"socket.io-client\";\r\nimport IconButton from \"@mui/material/IconButton\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Menu from \"@mui/material/Menu\";\r\nimport GridLoader from \"react-spinners/GridLoader\";\r\nimport SendIcon from \"@mui/icons-material/Send\";\r\nimport MenuItem from \"@mui/material/MenuItem\";\r\nimport Fade from \"@mui/material/Fade\";\r\nimport Badge from \"@mui/material/Badge\";\r\nimport MailIcon from \"@mui/icons-material/Mail\";\r\nimport { Typography } from \"@mui/material\";\r\nimport { searchuser } from \"../api/api-post\";\r\nimport { getSenderFull } from \"../config/chatLogic\";\r\nimport FindPeople from \"./FindPeople\";\r\nimport Box from \"@mui/material/Box\";\r\nimport { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { getChat } from \"../api/api-post\";\r\nimport { setMessage } from \"../api/api-post\";\r\nimport { fetchChats } from \"../api/api-post\";\r\nimport BounceLoader from \"react-spinners/BounceLoader\";\r\nimport MoonLoader from \"react-spinners/MoonLoader\";\r\nimport TextField from \"@mui/material/TextField\";\r\nimport CircularProgress from \"@mui/material/CircularProgress\";\r\nimport { getMessage } from \"../api/api-post\";\r\nimport Stack from \"@mui/material/Stack\";\r\nimport DarkModeIcon from \"@mui/icons-material/DarkMode\";\r\nimport Autocomplete from \"@mui/material/Autocomplete\";\r\nimport { toast } from \"react-toastify\";\r\nimport {\r\n  isLastMessage,\r\n  isSameSender,\r\n  isSameSenderMargin,\r\n  isSameUser,\r\n} from \"../config/chatLogic\";\r\n\r\nvar socket;\r\nvar selectedChatCompare;\r\nconst Join = () => {\r\n  const [search, setSearch] = useState(\"\");\r\n  const [searchResult, setSearchResult] = useState([]);\r\n  const [open, setOpen] = useState(false);\r\n  const [value1, setValue1] = useState({});\r\n  const [chats, setChats] = useState([]);\r\n  const [notification, setNotification] = useState([]);\r\n  const [chat, setChat] = useState([]);\r\n  const [selectChat, setSelectChat] = useState(false);\r\n  const [socketcon, Setsocketc] = useState(false);\r\n  const [loading1, Setloading1] = useState(false);\r\n  const [messages, setMessages] = useState([]);\r\n  const [newMessage, setNewMessage] = useState(\"\");\r\n  const [lastM, setLastM] = useState([]);\r\n  const [typing, setTyping] = useState(false);\r\n  const [istyping, setIsTyping] = useState(false);\r\n  const jwt = auth.isAuthenticated();\r\n  const user1 = jwt1(jwt.token);\r\n  const loading = searchResult.length != 0 && open;\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const [fetchAgain, setFetchAgain] = useState(false);\r\n  const [mode, setMode] = useState(\"light\");\r\n\r\n  const [l, sl] = useState(\"\");\r\n  const open1 = Boolean(anchorEl);\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n  const handleClose = (chat) => {\r\n    setAnchorEl(null);\r\n  };\r\n  const handleClose1 = (notiy) => {\r\n    setAnchorEl(null);\r\n    setSelectChat(true);\r\n    setChat(notiy.chat);\r\n    selectedChatCompare = chat;\r\n    fetchMessages();\r\n    setNotification(notification.filter((e) => e !== notiy));\r\n    // Get(chat)\r\n  };\r\n  function padTo2Digits(num) {\r\n    return String(num).padStart(2, \"0\");\r\n  }\r\n\r\n  const fetchMessages = async () => {\r\n    if (!selectChat) return;\r\n\r\n    try {\r\n      await getMessage(\r\n        {\r\n          userId: user1.id,\r\n        },\r\n        {\r\n          t: jwt.token,\r\n        },\r\n        chat._id\r\n      ).then((data) => {\r\n        setMessages(data);\r\n        socket.emit(\"join chat\", chat._id);\r\n        console.log(data);\r\n      });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const Get = async (v) => {\r\n    if (!v) return;\r\n    Setloading1(true);\r\n    setValue1(v);\r\n    await getChat(\r\n      {\r\n        userId: user1.id,\r\n      },\r\n      {\r\n        t: jwt.token,\r\n      },\r\n      v._id\r\n    ).then((data) => {\r\n      if (data) {\r\n        setSelectChat(true);\r\n        setChat(data);\r\n        selectedChatCompare = chat;\r\n        fetchMessages();\r\n        Setloading1(false);\r\n      }\r\n    });\r\n  };\r\n  const PostMessage = async () => {\r\n    if (!newMessage) return;\r\n    setNewMessage(\"\");\r\n    socket.emit(\"stop typing\", chat._id);\r\n\r\n    await setMessage(\r\n      { id: user1.id, chatId: chat._id, content: newMessage },\r\n      {\r\n        t: jwt.token,\r\n      }\r\n    ).then((data) => {\r\n      socket.emit(\"new message\", data);\r\n      setMessages([...messages, data]);\r\n      setFetchAgain(!fetchAgain);\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    searchuser(\r\n      {\r\n        userId: user1.id,\r\n      },\r\n      {\r\n        t: jwt.token,\r\n      },\r\n      {\r\n        search: search,\r\n      }\r\n    ).then((data) => {\r\n      if (search != \"\") setSearchResult(data);\r\n      else setSearchResult([]);\r\n    });\r\n  }, [search]);\r\n\r\n  useEffect(() => {\r\n    fetchMessages();\r\n    selectedChatCompare = chat;\r\n  }, [chat]);\r\n\r\n  useEffect(() => {\r\n    console.log(user1);\r\n    socket = io(\"http://localhost:4000/\");\r\n    socket.emit(\"setup\", user1);\r\n    socket.on(\"connected\", () => Setsocketc(true));\r\n    socket.on(\"typing\", () => setIsTyping(true));\r\n    socket.on(\"stop typing\", () => setIsTyping(false));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchChats(\r\n      {\r\n        userId: user1.id,\r\n      },\r\n      {\r\n        t: jwt.token,\r\n      }\r\n    ).then((data) => {\r\n      if (data) setChats(data);\r\n      console.log(data);\r\n    });\r\n  }, [fetchAgain]);\r\n  useEffect(() => {\r\n    socket.on(\"message recieved\", (newMessageRecieved) => {\r\n      if (\r\n        !selectedChatCompare || // if chat is not selected or doesn't match current chat\r\n        selectedChatCompare._id !== newMessageRecieved.chat._id\r\n      ) {\r\n        if (!notification.includes(newMessageRecieved)) {\r\n          setNotification([newMessageRecieved, ...notification]);\r\n          setFetchAgain(!fetchAgain);\r\n        }\r\n      } else {\r\n        setMessages([...messages, newMessageRecieved]);\r\n        setFetchAgain(!fetchAgain);\r\n      }\r\n    });\r\n  });\r\n\r\n  const [ChatColor, setChatColor] = useState(\"white\");\r\n  const [Color3, setColor3] = useState(\"white\");\r\n  const [TextColor, setTextC] = useState(\"black\");\r\n  const [Color4, setColor4] = useState(\"#dee2e6\");\r\n  const [STextColor, setStext] = useState(\"gray\");\r\n  const [backim, setbsckim] = useState(\"123.png\");\r\n  const [fchatc, setf] = useState(\"#b8ebb4\");\r\n  const [schatc, setsc] = useState(\"white\");\r\n  const [ima, setim] = useState(\"123.png\");\r\n\r\n  const change = (mode) => {\r\n    if (mode == \"dark\") {\r\n      setChatColor(\"#444F5A\");\r\n      setColor3(\"#222831\");\r\n      setTextC(\"white\");\r\n      setColor4(\"#222831\");\r\n      setStext(\"#D8D3CD\");\r\n      setbsckim(\"jbVvEcAi.jpg\");\r\n      setf(\"#274528\");\r\n      setsc(\"#393E46\");\r\n      setim(\"jbVvEcAi.jpg\");\r\n    } else {\r\n      setChatColor(\"white\");\r\n      setColor3(\"white\");\r\n\r\n      setim(\"123.png\");\r\n      setTextC(\"black\");\r\n      setColor4(\"#dee2e6\");\r\n      setStext(\"gray\");\r\n      setbsckim(\"123.png\");\r\n      setf(\"#b8ebb4\");\r\n      setsc(\"white\");\r\n    }\r\n  };\r\n\r\n  const typingHandler = (e) => {\r\n    setNewMessage(e.target.value);\r\n\r\n    if (!socketcon) return;\r\n\r\n    if (!typing) {\r\n      setTyping(true);\r\n      socket.emit(\"typing\", chat._id);\r\n    }\r\n    let lastTypingTime = new Date().getTime();\r\n    var timerLength = 3000;\r\n    setTimeout(() => {\r\n      var timeNow = new Date().getTime();\r\n      var timeDiff = timeNow - lastTypingTime;\r\n      if (timeDiff >= timerLength && typing) {\r\n        socket.emit(\"stop typing\", chat._id);\r\n        setTyping(false);\r\n      }\r\n    }, timerLength);\r\n  };\r\n  const messagesEndRef = useRef();\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current &&\r\n      messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  const handleKeyDown = (event) => {\r\n    if (event.key === 'Enter') {\r\n      PostMessage();\r\n    }\r\n  }\r\n  useEffect(scrollToBottom, [messages]);\r\n  return (\r\n    <div>\r\n      <div>\r\n        <section className=\"vh-100 d-flex grey2\">\r\n          <div\r\n            className=\"col-4 p-0 h-100 \"\r\n            style={{ backgroundColor: `${Color4}` }}\r\n          >\r\n            <div\r\n              className=\"justify-content-between border p-3  d-flex align-items-start grey\"\r\n              style={{ backgroundColor: `${Color3}`, color: `${TextColor}` }}\r\n            >\r\n              <h5 className=\"font-weight-bold ms-3 mt-1\">Chats</h5>\r\n\r\n              <div className=\"rounded input-group m-0 ps-3 pe-5\">\r\n                <Stack spacing={1} sx={{ width: 100 }}>\r\n                  <Autocomplete\r\n                    className=\"rounded\"\r\n                    size=\"small\"\r\n                    id=\"asynchronous-demo\"\r\n                    sx={{ width: 250 }}\r\n                    options={searchResult}\r\n                    loading={loading}\r\n                    open={open}\r\n                    onOpen={() => {\r\n                      setOpen(true);\r\n                    }}\r\n                    onClose={() => {\r\n                      setOpen(false);\r\n                      //setSearchResult([])\r\n                    }}\r\n                    onChange={(event, value) => Get(value)} // prints the selected value\r\n                    autoHighlight\r\n                    getOptionLabel={(option) => option.name}\r\n                    renderOption={(props, option) => (\r\n                      <Box\r\n                        component=\"li\"\r\n                        sx={{ \"& > img\": { mr: 2, flexShrink: 0 } }}\r\n                        {...props}\r\n                      >\r\n                        <img\r\n                          className=\"rounded-circle me-3\"\r\n                          loading=\"lazy\"\r\n                          width=\"30\"\r\n                          height=\"30\"\r\n                          src={option.image}\r\n                          //srcSet={`https://flagcdn.com/w40/${option.code.toLowerCase()}.png 2x`}\r\n                          alt=\"\"\r\n                        />\r\n                        {option.name}\r\n                      </Box>\r\n                    )}\r\n                    renderInput={(params) => (\r\n                      <TextField\r\n                        className={\"rounded bg-white\"}\r\n                        sx={{ p: \"0px\" }}\r\n                        size=\"small\"\r\n                        onChange={(e) => setSearch(e.target.value)}\r\n                        {...params}\r\n                        placeholder=\"Search To Chat\"\r\n                        InputProps={{\r\n                          ...params.InputProps,\r\n                          endAdornment: (\r\n                            <React.Fragment>\r\n                              {loading ? (\r\n                                <CircularProgress color=\"inherit\" size={20} />\r\n                              ) : null}\r\n                              {params.InputProps.endAdornment}\r\n                            </React.Fragment>\r\n                          ),\r\n                        }}\r\n                      />\r\n                    )}\r\n                  />\r\n                </Stack>\r\n              </div>\r\n              <div className={\"ml-2\"}>\r\n                <Stack\r\n                  spacing={4}\r\n                  direction=\"row\"\r\n                  sx={{ color: \"action.active\" }}\r\n                >\r\n                  <Badge\r\n                    id=\"fade-button\"\r\n                    aria-controls={open1 ? \"fade-menu\" : undefined}\r\n                    aria-haspopup=\"true\"\r\n                    aria-expanded={open1 ? \"true\" : undefined}\r\n                    onClick={handleClick}\r\n                    color=\"secondary\"\r\n                    badgeContent={notification.length}\r\n                  >\r\n                    <MailIcon color=\"primary\" fontSize=\"large\" />\r\n                  </Badge>\r\n                </Stack>\r\n                <Menu\r\n                  id=\"fade-menu\"\r\n                  MenuListProps={{\r\n                    \"aria-labelledby\": \"fade-button\",\r\n                  }}\r\n                  anchorEl={anchorEl}\r\n                  open={open1}\r\n                  onClose={handleClose}\r\n                  TransitionComponent={Fade}\r\n                >\r\n                  {notification.length == 0 ? (\r\n                    <MenuItem onClick={handleClose}>No Message</MenuItem>\r\n                  ) : (\r\n                    <div>\r\n                      {notification.map((notify) => {\r\n                        return (\r\n                          <MenuItem onClick={() => handleClose1(notify)}>\r\n                            \"New Message from : \"\r\n                            {getSender(user1, notify.chat.users)}\r\n                          </MenuItem>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  )}\r\n                </Menu>\r\n              </div>\r\n            </div>\r\n            <div className=\"justify-content-center scroll overflow-auto px-3 mt-2\">\r\n            <div className=\" mb-2\">\r\n              <i\r\n                className={\"fa fa-moon-o btn btn-dark mb-1 \"}\r\n                onClick={() => change(\"dark\")}\r\n              >\r\n                dark\r\n              </i>\r\n              <button\r\n                className={\"fa fa-moon-o btn btn-light mb-1\"}\r\n                onClick={() => change(\"light\")}\r\n              >\r\n                light\r\n              </button>\r\n              </div>\r\n              {chats.map((chat) => {\r\n                return (\r\n                  <div>\r\n                  {chat.latestMessage &&\r\n                  <div\r\n                    className=\"d-flex text-white align-items-center justify-content-between px-3 py-1 hovering shadow-sm  mb-1 \r\n              border-radius\"\r\n                    onClick={() => {\r\n                      Setloading1(true);\r\n                      setTimeout(function () {\r\n                        Setloading1(false);\r\n                        setSelectChat(true);\r\n                        setValue1(getSenderFull(user1, chat.users));\r\n                        setChat(chat);\r\n                      }, 700);\r\n                    }}\r\n                    style={{\r\n                      backgroundColor: `${ChatColor}`,\r\n                    }}\r\n                  >\r\n                    <div className=\"d-flex align-items-center\">\r\n                      <img\r\n                        src={getSenderFull(user1, chat.users).image}\r\n                        alt=\"\"\r\n                        className=\"rounded-circle me-3\"\r\n                        width=\"50px\"\r\n                        height=\"50px\"\r\n                      />\r\n                      <div className=\"mt-3\">\r\n                        <h6\r\n                          style={{ color: `${TextColor}` }}\r\n                          className=\"m-0 text-lg-left font-weight-bold\"\r\n                        >\r\n                          {getSender(user1, chat.users)}\r\n                        </h6>\r\n                        {chat.latestMessage ? (\r\n                          <p style={{ color: `${STextColor}` }}>\r\n                            {chat.latestMessage.content}\r\n                          </p>\r\n                        ) : null}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"\">\r\n                      {chat.latestMessage ? (\r\n                        <p\r\n                          className=\"m-0 mb-2\"\r\n                          style={{ color: `${STextColor}` }}\r\n                        >\r\n                          {new Date(\r\n                            chat.latestMessage.createdAt\r\n                          ).toLocaleTimeString(\"en-US\", {\r\n                            // en-US can be set to 'default' to use user's browser settings\r\n                            hour: \"2-digit\",\r\n                            minute: \"2-digit\",\r\n                          })}\r\n                        </p>\r\n                      ) : null}\r\n                    </div>\r\n                  </div>}\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n          {selectChat ? (\r\n            <div className=\"col-8 h-100 p-0 \">\r\n              <div\r\n                style={{\r\n                  backgroundColor: `${Color3}`,\r\n                }}\r\n                className=\"d-flex ps-3 pe-4 py-3 border justify-content-between\"\r\n              >\r\n                <div className=\"d-flex\">\r\n                  <img\r\n                    src={value1.image}\r\n                    alt=\"\"\r\n                    className=\"rounded-circle me-2\"\r\n                    width=\"40px\"\r\n                    height=\"40px\"\r\n                  />\r\n                  <div className=\"\">\r\n                    <h6\r\n                      style={{\r\n                        color: `${TextColor}`,\r\n                      }}\r\n                      className=\"font-weight-bold mt-2\"\r\n                    >\r\n                      {value1.name}\r\n                    </h6>\r\n                  </div>\r\n                </div>\r\n                <i\r\n                  onClick={() => setSelectChat(false)}\r\n                  className=\"fa fa-window-close fs-4 text-secondary\"\r\n                />\r\n              </div>\r\n              <div\r\n                style={{\r\n                  backgroundImage: `url(../images/${backim})`,\r\n                }}\r\n                className=\"scroll2 overflow-auto mb-0 px-5 py-3\"\r\n              >\r\n                {messages &&\r\n                  messages.map((m, i) => (\r\n                    <div style={{ display: \"flex\" }} key={m._id}>\r\n                      <p\r\n                        className=\"d-inline-block rounded\"\r\n                        style={{\r\n                          color: `${TextColor}`,\r\n                          backgroundColor: `${\r\n                            m.sender._id === user1.id ? fchatc : schatc\r\n                          }`,\r\n                          marginLeft: isSameSenderMargin(\r\n                            messages,\r\n                            m,\r\n                            i,\r\n                            user1.id\r\n                          ),\r\n                          marginTop: isSameUser(messages, m, i, user1.id)\r\n                            ? 3\r\n                            : 10,\r\n                          borderRadius: \"20px\",\r\n                          marginBottom: \"0px\",\r\n                          padding: \"5px 15px\",\r\n                          maxWidth: \"75%\",\r\n                        }}\r\n                      >\r\n                        {m.content}\r\n                      </p>\r\n                    </div>\r\n                  ))}\r\n                {istyping ? (\r\n                  <div\r\n                    style={{ marginBottom: 15, marginLeft: 0 }}\r\n                    className=\"d-flex justify-content-end mt-4\"\r\n                  >\r\n                    <div className=\"circle me-1 circle1\" />\r\n                    <div className=\"circle me-1 circle2\" />\r\n                    <div className=\"circle me-1 circle3\" />\r\n                    <div className=\"circle me-1 circle4\" />\r\n                  </div>\r\n                ) : null}\r\n                <div ref={messagesEndRef} />\r\n              </div>\r\n              <div\r\n                className=\"d-flex align-items-center py-2 justify-content-center px-4 \"\r\n                style={{\r\n                  backgroundColor: `${ChatColor}`,\r\n                }}\r\n              >\r\n                <i className=\"fa-regular fa-face-laugh-beam fs-4 me-3 text-secondary\" />\r\n                <i className=\"fa-solid fa-paperclip fs-4 me-3 text-secondary\" />\r\n                <input\r\n                  style={{\r\n                    backgroundColor: `${Color4}`,\r\n                    color:`${TextColor}`\r\n                  }}\r\n                  value={newMessage}\r\n                  onChange={typingHandler}\r\n                  type=\"text\"\r\n                  className=\"form-control grey p-2\"\r\n                  placeholder=\"type a message\"\r\n                  aria-label=\"First name\"\r\n                  onKeyDown={handleKeyDown}\r\n                />\r\n                <i\r\n                  onClick={PostMessage}\r\n                  aria-hidden=\"true\"\r\n                  className=\"fa fa-paper-plane bg-primary green px-4 py-2 ms-3 rounded\"\r\n                />\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div\r\n              style={{\r\n                backgroundImage: `url(../images/${ima})`,\r\n              }}\r\n              className=\"scroll2 col-8 h-100 p-0 bg-black\"\r\n            >\r\n              {!loading1 ? (\r\n                <h1 className=\"f align-center\" style={{ color: TextColor }}>\r\n                  {user1.name}, Select any Chat\r\n                </h1>\r\n              ) : (\r\n                <GridLoader className=\"f align-center\" color=\"#3667d6\" />\r\n              )}\r\n            </div>\r\n          )}\r\n        </section>\r\n      </div>\r\n\r\n      <div></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Join;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}