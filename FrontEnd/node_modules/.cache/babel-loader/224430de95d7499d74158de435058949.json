{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from\"axios\";import{Button,ButtonGroup}from'@chakra-ui/react';import{toast}from'react-toastify';import{Link}from'react-router-dom';import'react-toastify/dist/ReactToastify.css';import{useNavigate}from\"react-router-dom\";import PulseLoader from\"react-spinners/PulseLoader\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Login=_ref=>{let{history}=_ref;let[loading,setLoading]=useState(false);let[color,setColor]=useState(\"#000000\");const nav=useNavigate();useEffect(()=>{if(localStorage.getItem(\"userInfo1\")){nav('/s');}},[history]);const[data,setData]=useState({});const handleClick=async event=>{event.preventDefault();setLoading(true);if(!data.email||!data.password){toast.warning('Please Fill all the Feilds',{position:toast.POSITION.TOP_LEFT});return;}const requestOptions={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)};try{const response=await fetch('http://localhost:4000/api/users/login',requestOptions);const Data=await response.json();console.log(Data);if(Data.success){localStorage.setItem(\"userInfo1\",JSON.stringify(Data));toast.success('Successful Login',{position:toast.POSITION.TOP_LEFT,autoClose:1000});setLoading(false);nav('/s');}else{throw Data;}}catch(Data){console.log(Data);toast.warning(Data.errors,{position:toast.POSITION.TOP_LEFT,autoClose:1000});setLoading(false);}};function handleChange(event){const{name,value}=event.target;setData(pre=>{return{...pre,[name]:value};});}return/*#__PURE__*/_jsxs(\"div\",{class:\"container mt-5\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),/*#__PURE__*/_jsx(PulseLoader,{color:color,loading:loading,size:15}),/*#__PURE__*/_jsxs(\"div\",{class:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"col-sm-8\",children:/*#__PURE__*/_jsx(\"div\",{class:\"card\",children:/*#__PURE__*/_jsx(\"div\",{class:\"card-body\",children:/*#__PURE__*/_jsxs(\"form\",{action:\"/login\",method:\"POST\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleChange,type:\"email\",class:\"form-control\",name:\"email\"})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleChange,type:\"password\",class:\"form-control\",name:\"password\"}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Don't Have an acount Register\"})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClick,class:\"btn btn-dark\",children:\"Login\"})]})})})}),/*#__PURE__*/_jsx(\"div\",{class:\"col-sm-4\"})]})]});};export default Login;","map":{"version":3,"names":["React","useState","useEffect","axios","Button","ButtonGroup","toast","Link","useNavigate","PulseLoader","Login","history","loading","setLoading","color","setColor","nav","localStorage","getItem","data","setData","handleClick","event","preventDefault","email","password","warning","position","POSITION","TOP_LEFT","requestOptions","method","headers","body","JSON","stringify","response","fetch","Data","json","console","log","success","setItem","autoClose","errors","handleChange","name","value","target","pre"],"sources":["D:/5th Sem/Web Technologies/WT PROJECT/Social/Social-Networking-Mern/FrontEnd/src/component/Login.jsx"],"sourcesContent":["import React,{useState , useEffect} from 'react'\r\nimport axios from \"axios\";\r\nimport { Button, ButtonGroup } from '@chakra-ui/react'\r\nimport {toast} from 'react-toastify';\r\nimport { Link } from 'react-router-dom';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport PulseLoader from \"react-spinners/PulseLoader\";\r\n\r\n\r\nconst Login = ({history}) => {\r\n  let [loading, setLoading] = useState(false);\r\n  let [color, setColor] = useState(\"#000000\");\r\n\r\nconst nav = useNavigate();\r\n\r\n\r\n useEffect(()=>{\r\n    if(localStorage.getItem(\"userInfo1\"))\r\n    {\r\n         nav('/s')\r\n    }\r\n  },[history])\r\n\r\n\r\nconst [data,setData] = useState({})\r\nconst handleClick = async (event) => {\r\n      event.preventDefault();\r\n    setLoading(true)\r\n    if (!data.email || !data.password) {\r\n      toast.warning('Please Fill all the Feilds',{position: toast.POSITION.TOP_LEFT})\r\n      return;\r\n    }\r\n\r\n      const requestOptions = {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(data),\r\n        \r\n    };\r\n    try{\r\n    const response = await fetch('http://localhost:4000/api/users/login', requestOptions);\r\n    const Data = await response.json();\r\n    console.log(Data);\r\n    \r\n    if(Data.success){\r\n    localStorage.setItem(\"userInfo1\", JSON.stringify(Data));\r\n    toast.success('Successful Login',{position: toast.POSITION.TOP_LEFT,autoClose:1000})\r\n    setLoading(false)\r\n    nav('/s')\r\n    }\r\n  else \r\n  {\r\n    throw Data\r\n  }\r\n  }catch(Data){\r\n      console.log(Data)\r\n      toast.warning(Data.errors,{position: toast.POSITION.TOP_LEFT,autoClose:1000})\r\n      setLoading(false)\r\n\r\n  }\r\n    \r\n  }\r\nfunction handleChange(event)\r\n  {\r\n       const {name,value} = event.target;\r\n\r\n       setData((pre)=>{\r\n         return {\r\n         ...pre,\r\n         [name]:value,\r\n\r\n         }\r\n       })\r\n\r\n  }\r\n\r\n  return (\r\n<div class=\"container mt-5\">\r\n  <h1>Login</h1>\r\n  <PulseLoader  color={color} loading={loading} size={15} />\r\n  <div class=\"row\">\r\n    <div class=\"col-sm-8\">\r\n      <div class=\"card\">\r\n        <div class=\"card-body\">\r\n          <form action=\"/login\" method=\"POST\">\r\n            <div class=\"form-group\">\r\n              <label for=\"email\">Email</label>\r\n              <input onChange={handleChange} type=\"email\" class=\"form-control\" name=\"email\"/>\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label for=\"password\">Password</label>\r\n              <input onChange={handleChange}  type=\"password\" class=\"form-control\" name=\"password\"/>\r\n              <p>\r\n        <Link to=\"/register\">Don't Have an acount Register</Link>\r\n      </p>\r\n            </div>\r\n            <button onClick={handleClick} class=\"btn btn-dark\">Login</button>\r\n          </form>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"col-sm-4\">\r\n      \r\n    </div>\r\n\r\n  </div>\r\n</div>\r\n  )\r\n}\r\nexport default Login"],"mappings":"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"},"metadata":{},"sourceType":"module"}