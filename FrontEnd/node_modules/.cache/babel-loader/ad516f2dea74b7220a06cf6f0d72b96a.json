{"ast":null,"code":"import _regeneratorRuntime from\"D:/5th Sem/Web Technologies/WT PROJECT/Social/Social-Networking-Mern/FrontEnd/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/5th Sem/Web Technologies/WT PROJECT/Social/Social-Networking-Mern/FrontEnd/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/5th Sem/Web Technologies/WT PROJECT/Social/Social-Networking-Mern/FrontEnd/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useState}from'react';import auth from'./../auth/auth-help';import jwt1 from'jwt-decode';// import dependency\nimport{useEffect}from'react';import{create}from\"../api/api-post\";import{toast}from'react-toastify';import PulseLoader from\"react-spinners/PulseLoader\";import BarLoader from\"react-spinners/PulseLoader\";import axios from'axios';import{useReducer}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Post=function Post(props1){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),Text=_useState2[0],setText=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),pic=_useState4[0],setPic=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),image=_useState6[0],setImage=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),picLoading=_useState8[0],setPicLoading=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),picLoading1=_useState10[0],setPicLoading1=_useState10[1];var jwt=auth.isAuthenticated();var user=jwt1(jwt.token);var submitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(props){var PostData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setPicLoading(true);if(!(!Text&&!pic)){_context.next=5;break;}toast.warning('Please Type anything ',{position:toast.POSITION.TOP_LEFT,autoClose:1000});setPicLoading(false);return _context.abrupt(\"return\");case 5:try{PostData={Text:Text,pic:pic,user:user};create({userId:user.id},{t:jwt.token},PostData).then(function(d){setPic('');setText('');props1.onAdd1(d);});setText('');document.getElementById('file').value=\"\";setPicLoading(false);}catch(error){setPicLoading(false);console.log(error);toast.error('SomeThing Wrong',{position:toast.POSITION.TOP_LEFT,autoClose:1000});};setPicLoading(false);case 8:case\"end\":return _context.stop();}}},_callee);}));return function submitHandler(_x){return _ref.apply(this,arguments);};}();var ImageHander=function ImageHander(pics){setPicLoading1(true);if(pics.type===\"image/jpeg\"||pics.type===\"image/png\"){setImage(pics);var data=new FormData();data.append(\"file\",pics);data.append(\"upload_preset\",\"chat-app\");data.append(\"cloud_name\",\"dwjy0lwss\");fetch(\"https://api.cloudinary.com/v1_1/dwjy0lwss/image/upload\",{method:\"post\",body:data}).then(function(res){return res.json();}).then(function(data){setPic(data.url.toString());console.log(data.url.toString());setPicLoading1(false);return;}).catch(function(err){toast.error('Some Thing Wron1g',{position:toast.POSITION.TOP_LEFT,autoClose:1000});setPicLoading1(false);});}else{toast.error('Photo is invalid',{position:toast.POSITION.TOP_LEFT,autoClose:1000});setPicLoading1(false);return;}};return/*#__PURE__*/_jsxs(\"section\",{className:\"post border_radius border-info border_radius white overflow-hidden pb-4 border position-relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex align-items-center p-3 ps-4  mb-0\"}),/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsxs(\"form\",{action:\"\",className:\" d-flex flex-column ms-4 \",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"textarea\",{value:Text,name:\"\",id:\"\",cols:30,rows:2,onChange:function onChange(e){return setText(e.target.value);},className:\"outline w-75 \",placeholder:\"Share your thoughts \"+user.name}),/*#__PURE__*/_jsx(\"button\",{onClick:submitHandler,className:\"btn btn-primary btn-md ms-4 px-4 b-post\",children:\"Post\"}),/*#__PURE__*/_jsx(PulseLoader,{loading:picLoading,size:15})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"image-upload\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"file-input\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-camera-retro fs-3 mt-2 blue\"})}),/*#__PURE__*/_jsx(\"input\",{id:\"file-input\",onChange:function onChange(e){return ImageHander(e.target.files[0]);},name:\"photo\",accept:\"image/*\",type:\"file\",className:\"d-none\"}),/*#__PURE__*/_jsx(BarLoader,{loading:picLoading1,size:15})]}),pic&&/*#__PURE__*/_jsx(\"p\",{className:\"mb-0 mt-0\",children:image.name})]})})]});};export default Post;","map":{"version":3,"names":["React","useState","auth","jwt1","useEffect","create","toast","PulseLoader","BarLoader","axios","useReducer","Post","props1","Text","setText","pic","setPic","image","setImage","picLoading","setPicLoading","picLoading1","setPicLoading1","jwt","isAuthenticated","user","token","submitHandler","props","warning","position","POSITION","TOP_LEFT","autoClose","PostData","userId","id","t","then","d","onAdd1","document","getElementById","value","error","console","log","ImageHander","pics","type","data","FormData","append","fetch","method","body","res","json","url","toString","catch","err","e","target","name","files"],"sources":["D:/5th Sem/Web Technologies/WT PROJECT/Social/Social-Networking-Mern/FrontEnd/src/component/Post.jsx"],"sourcesContent":["import React from 'react'\r\nimport { useState } from 'react';\r\nimport auth from './../auth/auth-help'\r\nimport jwt1 from 'jwt-decode' // import dependency\r\nimport { useEffect } from 'react';\r\nimport {create} from \"../api/api-post\"\r\nimport {toast} from 'react-toastify';\r\nimport PulseLoader from \"react-spinners/PulseLoader\";\r\nimport BarLoader from \"react-spinners/PulseLoader\";\r\nimport axios from 'axios';\r\nimport { useReducer } from 'react';\r\n\r\nconst Post = (props1) => {\r\n\r\n  const [Text, setText] = useState('');\r\n  const [pic, setPic] = useState();\r\n  const [image,setImage]=useState()\r\n  const [picLoading, setPicLoading] = useState(false);\r\n  const [picLoading1, setPicLoading1] = useState(false);\r\n  const jwt = auth.isAuthenticated()\r\n  const user = (jwt1(jwt.token))\r\n\r\n\r\n  \r\n\r\nconst submitHandler = async (props) => {\r\n\r\nsetPicLoading(true);\r\n\r\n  if(!Text &&!pic)\r\n  {\r\n         toast.warning('Please Type anything ',{position: toast.POSITION.TOP_LEFT,autoClose:1000})\r\n          setPicLoading(false);\r\n         return \r\n  }\r\n\r\n  try{\r\nconst PostData = {\r\n         Text,\r\n          pic,\r\n          user,\r\n      } \r\n create({\r\n      userId: user.id\r\n    }, {\r\n      t: jwt.token\r\n    }, PostData).then((d) => {\r\n      \r\n        setPic('')\r\n        setText('')\r\n       props1.onAdd1(d)\r\n          \r\n    })\r\n     setText('')\r\n     document.getElementById('file').value = \"\";\r\n      setPicLoading(false);\r\n    } catch (error) {\r\n          setPicLoading(false);\r\n          console.log(error)\r\n          toast.error('SomeThing Wrong',{position: toast.POSITION.TOP_LEFT,autoClose:1000})\r\n      };\r\n      setPicLoading(false);\r\n    \r\n  };\r\n\r\n  const ImageHander=(pics)=>\r\n  {\r\n     setPicLoading1(true)\r\n    if (pics.type === \"image/jpeg\" || pics.type === \"image/png\") {\r\n      setImage(pics)\r\n      const data = new FormData();\r\n      data.append(\"file\", pics);\r\n      data.append(\"upload_preset\", \"chat-app\");\r\n      data.append(\"cloud_name\", \"dwjy0lwss\");\r\n      fetch(\"https://api.cloudinary.com/v1_1/dwjy0lwss/image/upload\", {\r\n        method: \"post\",\r\n        body: data,\r\n      })\r\n        .then((res) => res.json())\r\n        .then((data) => {\r\n          setPic(data.url.toString());\r\n          console.log(data.url.toString());\r\n          setPicLoading1(false);\r\n          return \r\n        })\r\n        .catch((err) => {\r\n          toast.error('Some Thing Wron1g',{position: toast.POSITION.TOP_LEFT,autoClose:1000})\r\n          setPicLoading1(false);\r\n        });\r\n    } else {\r\n          toast.error('Photo is invalid',{position: toast.POSITION.TOP_LEFT,autoClose:1000})\r\n      setPicLoading1(false);\r\n      return;\r\n    }\r\n  };\r\n    \r\n\r\n  return (\r\n    <section className=\"post border_radius border-info border_radius white overflow-hidden pb-4 border position-relative\">\r\n  <div className=\"d-flex align-items-center p-3 ps-4  mb-0\">\r\n  </div>\r\n  <div className=\"\">\r\n    <form action=\"\" className=\" d-flex flex-column ms-4 \">\r\n      <div>\r\n        <textarea\r\n          value={Text}\r\n          name=\"\"\r\n          id=\"\"\r\n          cols={30}\r\n          rows={2}\r\n          onChange={(e)=>setText(e.target.value)}\r\n          className=\"outline w-75 \"\r\n          placeholder={\"Share your thoughts \"+user.name}\r\n        />\r\n        <button  onClick={submitHandler} className=\"btn btn-primary btn-md ms-4 px-4 b-post\">\r\n          Post\r\n        </button>\r\n        <PulseLoader  loading={picLoading} size={15} />\r\n      </div>\r\n      <div className=\"image-upload\">\r\n        <label htmlFor=\"file-input\">\r\n          <i className=\"fa-solid fa-camera-retro fs-3 mt-2 blue\" />\r\n        </label>\r\n        <input id=\"file-input\"  onChange={(e)=>ImageHander(e.target.files[0])} \r\n            name=\"photo\" accept=\"image/*\" type=\"file\" className=\"d-none\" />\r\n        <BarLoader loading={picLoading1} size={15} />\r\n      </div>\r\n       {pic &&<p className='mb-0 mt-0'>{ image.name}</p>}\r\n    </form>\r\n  </div>\r\n</section>\r\n\r\n\r\n       \r\n    )\r\n}\r\nexport default Post"],"mappings":"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"},"metadata":{},"sourceType":"module"}