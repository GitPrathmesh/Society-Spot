{"ast":null,"code":"var _jsxFileName = \"D:\\\\5th Sem\\\\Web Technologies\\\\WT PROJECT\\\\Social\\\\Social-Networking-Mern\\\\FrontEnd\\\\src\\\\component\\\\Post.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useState } from 'react';\nimport auth from './../auth/auth-help';\nimport jwt1 from 'jwt-decode'; // import dependency\n\nimport { useEffect } from 'react';\nimport { create } from \"../api/api-post\";\nimport { toast } from 'react-toastify';\nimport PulseLoader from \"react-spinners/PulseLoader\";\nimport BarLoader from \"react-spinners/PulseLoader\";\nimport axios from 'axios';\nimport { useReducer } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Post = props1 => {\n  _s();\n\n  const [Text, setText] = useState('');\n  const [pic, setPic] = useState();\n  const [image, setImage] = useState();\n  const [picLoading, setPicLoading] = useState(false);\n  const [picLoading1, setPicLoading1] = useState(false);\n  const jwt = auth.isAuthenticated();\n  const user = jwt1(jwt.token);\n\n  const submitHandler = async props => {\n    setPicLoading(true);\n\n    if (!Text && !pic) {\n      toast.warning('Please Type anything ', {\n        position: toast.POSITION.TOP_LEFT,\n        autoClose: 1000\n      });\n      setPicLoading(false);\n      return;\n    }\n\n    try {\n      const PostData = {\n        Text,\n        pic,\n        user\n      };\n      create({\n        userId: user.id\n      }, {\n        t: jwt.token\n      }, PostData).then(d => {\n        setPic('');\n        setText('');\n        props1.onAdd1(d);\n      });\n      setText('');\n      document.getElementById('file').value = \"\";\n      setPicLoading(false);\n    } catch (error) {\n      setPicLoading(false);\n      console.log(error);\n      toast.error('SomeThing Wrong', {\n        position: toast.POSITION.TOP_LEFT,\n        autoClose: 1000\n      });\n    }\n\n    ;\n    setPicLoading(false);\n  };\n\n  const ImageHander = pics => {\n    setPicLoading1(true);\n\n    if (pics.type === \"image/jpeg\" || pics.type === \"image/png\") {\n      setImage(pics);\n      const data = new FormData();\n      data.append(\"file\", pics);\n      data.append(\"upload_preset\", \"chat-app\");\n      data.append(\"cloud_name\", \"dwjy0lwss\");\n      fetch(\"https://api.cloudinary.com/v1_1/dwjy0lwss/image/upload\", {\n        method: \"post\",\n        body: data\n      }).then(res => res.json()).then(data => {\n        setPic(data.url.toString());\n        console.log(data.url.toString());\n        setPicLoading1(false);\n        return;\n      }).catch(err => {\n        toast.error('Some Thing Wron1g', {\n          position: toast.POSITION.TOP_LEFT,\n          autoClose: 1000\n        });\n        setPicLoading1(false);\n      });\n    } else {\n      toast.error('Photo is invalid', {\n        position: toast.POSITION.TOP_LEFT,\n        autoClose: 1000\n      });\n      setPicLoading1(false);\n      return;\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"post border_radius border-info border_radius white overflow-hidden pb-4 border position-relative\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex align-items-center p-3 ps-4  mb-0\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 3\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        action: \"\",\n        className: \" d-flex flex-column ms-4 \",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: Text,\n            name: \"\",\n            id: \"\",\n            cols: 30,\n            rows: 2,\n            onChange: e => setText(e.target.value),\n            className: \"outline w-75 \",\n            placeholder: \"Share your thoughts \" + user.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: submitHandler,\n            className: \"btn btn-primary btn-md ms-4 px-4 b-post\",\n            children: \"Post\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(PulseLoader, {\n            loading: picLoading,\n            size: 15\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"image-upload\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"file-input\",\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa-solid fa-camera-retro fs-3 mt-2 blue\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 11\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"file-input\",\n            onChange: e => ImageHander(e.target.files[0]),\n            name: \"photo\",\n            accept: \"image/*\",\n            type: \"file\",\n            className: \"d-none\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(BarLoader, {\n            loading: picLoading1,\n            size: 15\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 7\n        }, this), pic && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mb-0 mt-0\",\n          children: image.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 3\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Post, \"ZQKJGo+rmXPratZ8PZh9vAzYUws=\");\n\n_c = Post;\nexport default Post;\n\nvar _c;\n\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"names":["React","useState","auth","jwt1","useEffect","create","toast","PulseLoader","BarLoader","axios","useReducer","Post","props1","Text","setText","pic","setPic","image","setImage","picLoading","setPicLoading","picLoading1","setPicLoading1","jwt","isAuthenticated","user","token","submitHandler","props","warning","position","POSITION","TOP_LEFT","autoClose","PostData","userId","id","t","then","d","onAdd1","document","getElementById","value","error","console","log","ImageHander","pics","type","data","FormData","append","fetch","method","body","res","json","url","toString","catch","err","e","target","name","files"],"sources":["D:/5th Sem/Web Technologies/WT PROJECT/Social/Social-Networking-Mern/FrontEnd/src/component/Post.jsx"],"sourcesContent":["import React from 'react'\r\nimport { useState } from 'react';\r\nimport auth from './../auth/auth-help'\r\nimport jwt1 from 'jwt-decode' // import dependency\r\nimport { useEffect } from 'react';\r\nimport {create} from \"../api/api-post\"\r\nimport {toast} from 'react-toastify';\r\nimport PulseLoader from \"react-spinners/PulseLoader\";\r\nimport BarLoader from \"react-spinners/PulseLoader\";\r\nimport axios from 'axios';\r\nimport { useReducer } from 'react';\r\n\r\nconst Post = (props1) => {\r\n\r\n  const [Text, setText] = useState('');\r\n  const [pic, setPic] = useState();\r\n  const [image,setImage]=useState()\r\n  const [picLoading, setPicLoading] = useState(false);\r\n  const [picLoading1, setPicLoading1] = useState(false);\r\n  const jwt = auth.isAuthenticated()\r\n  const user = (jwt1(jwt.token))\r\n\r\n\r\n  \r\n\r\nconst submitHandler = async (props) => {\r\n\r\nsetPicLoading(true);\r\n\r\n  if(!Text &&!pic)\r\n  {\r\n         toast.warning('Please Type anything ',{position: toast.POSITION.TOP_LEFT,autoClose:1000})\r\n          setPicLoading(false);\r\n         return \r\n  }\r\n\r\n  try{\r\nconst PostData = {\r\n         Text,\r\n          pic,\r\n          user,\r\n      } \r\n create({\r\n      userId: user.id\r\n    }, {\r\n      t: jwt.token\r\n    }, PostData).then((d) => {\r\n      \r\n        setPic('')\r\n        setText('')\r\n       props1.onAdd1(d)\r\n          \r\n    })\r\n     setText('')\r\n     document.getElementById('file').value = \"\";\r\n      setPicLoading(false);\r\n    } catch (error) {\r\n          setPicLoading(false);\r\n          console.log(error)\r\n          toast.error('SomeThing Wrong',{position: toast.POSITION.TOP_LEFT,autoClose:1000})\r\n      };\r\n      setPicLoading(false);\r\n    \r\n  };\r\n\r\n  const ImageHander=(pics)=>\r\n  {\r\n     setPicLoading1(true)\r\n    if (pics.type === \"image/jpeg\" || pics.type === \"image/png\") {\r\n      setImage(pics)\r\n      const data = new FormData();\r\n      data.append(\"file\", pics);\r\n      data.append(\"upload_preset\", \"chat-app\");\r\n      data.append(\"cloud_name\", \"dwjy0lwss\");\r\n      fetch(\"https://api.cloudinary.com/v1_1/dwjy0lwss/image/upload\", {\r\n        method: \"post\",\r\n        body: data,\r\n      })\r\n        .then((res) => res.json())\r\n        .then((data) => {\r\n          setPic(data.url.toString());\r\n          console.log(data.url.toString());\r\n          setPicLoading1(false);\r\n          return \r\n        })\r\n        .catch((err) => {\r\n          toast.error('Some Thing Wron1g',{position: toast.POSITION.TOP_LEFT,autoClose:1000})\r\n          setPicLoading1(false);\r\n        });\r\n    } else {\r\n          toast.error('Photo is invalid',{position: toast.POSITION.TOP_LEFT,autoClose:1000})\r\n      setPicLoading1(false);\r\n      return;\r\n    }\r\n  };\r\n    \r\n\r\n  return (\r\n    <section className=\"post border_radius border-info border_radius white overflow-hidden pb-4 border position-relative\">\r\n  <div className=\"d-flex align-items-center p-3 ps-4  mb-0\">\r\n  </div>\r\n  <div className=\"\">\r\n    <form action=\"\" className=\" d-flex flex-column ms-4 \">\r\n      <div>\r\n        <textarea\r\n          value={Text}\r\n          name=\"\"\r\n          id=\"\"\r\n          cols={30}\r\n          rows={2}\r\n          onChange={(e)=>setText(e.target.value)}\r\n          className=\"outline w-75 \"\r\n          placeholder={\"Share your thoughts \"+user.name}\r\n        />\r\n        <button  onClick={submitHandler} className=\"btn btn-primary btn-md ms-4 px-4 b-post\">\r\n          Post\r\n        </button>\r\n        <PulseLoader  loading={picLoading} size={15} />\r\n      </div>\r\n      <div className=\"image-upload\">\r\n        <label htmlFor=\"file-input\">\r\n          <i className=\"fa-solid fa-camera-retro fs-3 mt-2 blue\" />\r\n        </label>\r\n        <input id=\"file-input\"  onChange={(e)=>ImageHander(e.target.files[0])} \r\n            name=\"photo\" accept=\"image/*\" type=\"file\" className=\"d-none\" />\r\n        <BarLoader loading={picLoading1} size={15} />\r\n      </div>\r\n       {pic &&<p className='mb-0 mt-0'>{ image.name}</p>}\r\n    </form>\r\n  </div>\r\n</section>\r\n\r\n\r\n       \r\n    )\r\n}\r\nexport default Post"],"mappings":"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"},"metadata":{},"sourceType":"module"}