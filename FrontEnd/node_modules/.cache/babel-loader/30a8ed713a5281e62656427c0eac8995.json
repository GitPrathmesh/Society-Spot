{"ast":null,"code":"import React from'react';import Post from'./Post';import Posts from'./Posts';import auth from'./../auth/auth-help';import jwt1 from'jwt-decode';// import dependency\nimport{useEffect}from'react';import{getFeed}from\"../api/api-post\";import FindPeople from\"./FindPeople\";import{useState}from'react';import{useNavigate}from\"react-router-dom\";import BounceLoader from'react-spinners/BounceLoader';import MoonLoader from'react-spinners/MoonLoader';import{toast}from'react-toastify';import NavBar from'./NavBar';import{listItemTextClasses}from'@mui/material';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const HomePage=()=>{const[posts,SetPosts]=useState([]);const[isnew,setnew]=useState(false);console.log(posts);const nav=useNavigate();function Addone(data1){setnew(true);console.log(data1);const updatedPosts=[...posts];updatedPosts.splice(0,0,data1);setTimeout(function(){SetPosts(updatedPosts);},500);setTimeout(function(){toast.success('Post Upload',{position:toast.POSITION.TOP_LEFT,autoClose:1500});SetPosts(updatedPosts);nav('/');},700);}const jwt=auth.isAuthenticated();const user1=jwt1(jwt.token);useEffect(()=>{getFeed({userId:user1.id},{t:jwt.token}).then(data=>SetPosts(data));},[]);const updata=post=>{console.log(post);let updated=[...posts];console.log(updated);updated=updated.filter(function(item){return item._id!==post._id;});setTimeout(function(){toast.success('Post Deleted',{position:toast.POSITION.TOP_LEFT,autoClose:1500});SetPosts(updated);nav('/');},100);};return/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:\"#fafafa \"},children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsx(\"section\",{className:\"p-lg-0 p-md-3 p-3 mb-3 mt-5 container \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex overflow-hidden justify-content-evenly m-auto align-items-start px-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"left  col-lg-7 col-sm-12  col-sm-12  h-100  border_radius mt-5\",children:[/*#__PURE__*/_jsx(Post,{onAdd1:Addone}),isnew?/*#__PURE__*/_jsx(MoonLoader,{color:\"#077ce8\",cssOverride:{},loading:true,size:60}):null,posts.map((post,idx)=>{return/*#__PURE__*/_jsx(Posts,{updatePosts:updata,post:post},idx);})]}),/*#__PURE__*/_jsx(FindPeople,{})]})})]});};export default HomePage;","map":{"version":3,"names":["React","Post","Posts","auth","jwt1","useEffect","getFeed","FindPeople","useState","useNavigate","BounceLoader","MoonLoader","toast","NavBar","listItemTextClasses","HomePage","posts","SetPosts","isnew","setnew","console","log","nav","Addone","data1","updatedPosts","splice","setTimeout","success","position","POSITION","TOP_LEFT","autoClose","jwt","isAuthenticated","user1","token","userId","id","t","then","data","updata","post","updated","filter","item","_id","backgroundColor","map","idx"],"sources":["D:/5th Sem/Web Technologies/WT PROJECT/Social/Social-Networking-Mern/FrontEnd/src/component/HomePage.jsx"],"sourcesContent":["import React from 'react'\r\nimport Post from './Post'\r\nimport Posts from './Posts'\r\nimport auth from './../auth/auth-help'\r\nimport jwt1 from 'jwt-decode' // import dependency\r\nimport { useEffect } from 'react';\r\nimport {getFeed} from \"../api/api-post\"\r\nimport FindPeople from \"./FindPeople\"\r\nimport { useState } from 'react'\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport BounceLoader from 'react-spinners/BounceLoader'\r\nimport MoonLoader from 'react-spinners/MoonLoader'\r\nimport {toast} from 'react-toastify';\r\nimport NavBar from './NavBar'\r\nimport { listItemTextClasses } from '@mui/material'\r\n\r\nconst HomePage = () => {\r\n  const [posts, SetPosts] = useState([]);\r\n  const [isnew , setnew] = useState(false);\r\n\r\n  console.log(posts);\r\n\r\n  const nav = useNavigate()\r\n\r\nfunction Addone(data1) {\r\n  setnew(true)\r\n  console.log(data1)\r\n  const updatedPosts = [...posts]\r\n  updatedPosts.splice(0, 0, data1);\r\n    setTimeout(function() {\r\n    SetPosts(updatedPosts)\r\n  }, 500);\r\n  setTimeout(function() {\r\n   toast.success('Post Upload',{position: toast.POSITION.TOP_LEFT,autoClose:1500}) \r\n    SetPosts(updatedPosts)\r\n   nav('/'); \r\n  }, 700);\r\n    \r\n\r\n  }  \r\nconst jwt = auth.isAuthenticated()\r\nconst user1 = jwt1(jwt.token);\r\n\r\n\r\nuseEffect(()=>{\r\n\r\n getFeed({\r\n      userId: user1.id\r\n    },{\r\n      t: jwt.token\r\n    }\r\n    ).then((data) => SetPosts(data))\r\n\r\n},[])\r\n\r\nconst updata = (post)=>{\r\n        console.log(post)\r\n\r\n    let updated = [...posts]\r\n      console.log(updated)\r\n\r\nupdated = updated.filter(function(item) {\r\n    return item._id !== post._id\r\n})\r\n  setTimeout(function() {\r\n   toast.success('Post Deleted',{position: toast.POSITION.TOP_LEFT,autoClose:1500}) \r\n    SetPosts(updated)\r\n   nav('/'); \r\n  }, 100);\r\n}\r\n\r\n  return (\r\n    <div style={{backgroundColor : \"#fafafa \"}}>\r\n{/*---------------------------------------------------------navbar----------------------------------------------------------*/}\r\n    <NavBar/>\r\n\r\n        <section className= \"p-lg-0 p-md-3 p-3 mb-3 mt-5 container \">\r\n\r\n            <div className=\"d-flex overflow-hidden justify-content-evenly m-auto align-items-start px-5\" >\r\n\r\n                <div className=\"left  col-lg-7 col-sm-12  col-sm-12  h-100  border_radius mt-5\" >\r\n             <Post onAdd1={Addone}/>\r\n               {isnew?<MoonLoader\r\n  color=\"#077ce8\"\r\n  cssOverride={{}}\r\n  loading\r\n  size={60}\r\n  \r\n/>:null}\r\n             {posts.map((post,idx)=>{\r\n               return (\r\n             <Posts updatePosts={updata} key={idx} post={post}/>\r\n               )\r\n             })}\r\n          </div>\r\n             <FindPeople/>\r\n            </div>\r\n        </section>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default HomePage"],"mappings":"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"},"metadata":{},"sourceType":"module"}